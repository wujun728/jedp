(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-0516"],{"9E5Y":function(e,t,i){"use strict";var n=i("msoO");i.n(n).a},CQQS:function(e,t,i){"use strict";var n=i("4d7F"),o=i.n(n),a=i("EP+0"),s=i("UGe0"),l=i("jPAu"),r={name:"BaseInfoSet",components:{CreateSections:a.a,WkForm:s.a,WkUserDepSelect:l.a},props:{fields:Array,fieldsForm:Object,fieldsRules:Object},data:function(){return{loading:!1}},computed:{form:function(){return this.$refs.wkBaseFrom.instance}},mounted:function(){},methods:{validate:function(){var e=this;return new o.a(function(t){e.form.validate(function(i){i||e.$message.error("请完善基本信息"),t(i)})})},formChange:function(e,t,i){this.$emit("change",e,t,i)},userDepSelectChange:function(e,t,i){var n=e[2],o=e[3];this.$emit("change",t,i,{userList:n,deptList:o})},hidenView:function(){this.$emit("hiden-view")}}},c=(i("rToW"),i("KHd+")),d=Object(c.a)(r,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-card",{staticClass:"base-info-set",attrs:{loading:e.loading,"body-style":{height:"100%"}}},[i("div",{staticClass:"base-info-set__header"},[e._v("\n    配置基础信息\n  ")]),e._v(" "),i("create-sections",{attrs:{title:"基础信息"}},[i("wk-form",{ref:"wkBaseFrom",attrs:{model:e.fieldsForm,rules:e.fieldsRules,"field-from":e.fieldsForm,"field-list":e.fields,"label-position":"top"},on:{change:e.formChange},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.data,o=t.index;return[n&&"userDep"==n.formType?i("wk-user-dep-select",{staticStyle:{width:"100%"},attrs:{"user-value":e.fieldsForm.userList,"dep-value":e.fieldsForm.deptList},on:{"update:userValue":function(t){e.$set(e.fieldsForm,"userList",t)},"update:depValue":function(t){e.$set(e.fieldsForm,"deptList",t)},change:function(t){e.userDepSelectChange(arguments,n,o)}}}):[e._t("default",null,{data:n})]]}}])})],1)],1)},[],!1,null,"9e091d3c",null);d.options.__file="BaseInfoSet.vue";t.a=d.exports},CTme:function(e,t,i){},EOoe:function(e,t,i){"use strict";var n=i("h0UK");i.n(n).a},Ew4w:function(e,t,i){e.exports={xrColorPrimary:"#2362FB"}},HTer:function(e,t,i){"use strict";var n=i("ZGVA");i.n(n).a},J5zA:function(e,t,i){"use strict";var n=i("xcIE");i.n(n).a},KMeb:function(e,t,i){"use strict";var n=i("lPTY");i.n(n).a},LrLK:function(e,t,i){"use strict";var n=i("CTme");i.n(n).a},LrR8:function(e,t,i){"use strict";var n=i("4peS"),o=i.n(n),a={name:"ApprovalFlowUpdateDialog",components:{},props:{},data:function(){return{visible:!1}},computed:{},watch:{},created:function(){},mounted:function(){var e=this;o.a.get("WkApprovalFlowUpdateDialog")||setTimeout(function(){e.visible=!0},1e3)},beforeDestroy:function(){},methods:{sureClick:function(){o.a.set("WkApprovalFlowUpdateDialog",!0),this.visible=!1}}},s=(i("EOoe"),i("KHd+")),l=Object(s.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{staticClass:"approval-flow-update-dialog",attrs:{visible:e.visible,"show-close":!1,"close-on-press-escape":!1,"close-on-click-modal":!1,title:"提示",width:"700px","destroy-on-close":""},on:{"update:visible":function(t){e.visible=t}}},[i("template",{slot:"title"},[i("i",{staticClass:"el-icon-warning"}),e._v("审批流程变更说明！")]),e._v(" "),i("div",{staticClass:"content"},[e._v("由于审批流程全面升级，审批流程变更如下："),i("br"),e._v(" "),i("span",[e._v("① 审核状态为“待审核、审核中”的数据，自动处理为“已拒绝”，需要发起人重新编辑提交。")]),i("br"),e._v("\n    ② 若审批用的是固定审批流，则根据新审批流自动适配，审批流程不受影响。"),i("br"),e._v("\n    ③ 若原审批流程为“授权审批人”则自动变为新审批流中的“发起人自选”，审批流程与原审批流不同。")]),e._v(" "),i("div",{staticClass:"content"},[e._v("如对审批流有异议，请立即联系系统管理员重新配置此审批流！给您带来的不便，敬请谅解。")]),e._v(" "),i("div",{staticClass:"des"},[e._v("备注：发起人自选是指由发起人创建表单时自由选择每个节点的审批人，无需审批人选择，当前配置默认可以选择多个审批人，并且根据审批人顺序依次审批。")]),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.sureClick}},[e._v("我已知晓")])],1)],2)},[],!1,null,null,null);l.options.__file="ApprovalFlowUpdateDialog.vue";t.a=l.exports},OBdy:function(e,t,i){"use strict";var n=i("4d7F"),o=i.n(n),a=i("YSp2");t.a={data:function(){return{wkRoleOption:[]}},methods:{getListInfo:function(e,t){var i=this;e.forEach(function(e){0===e.examineType?t.push(i.getConditonWrapInfo(e)):t.push(i.getNodeInfo(e))})},getNodeInfo:function(e){var t=this,i={examineType:e.examineType,name:e.name,conditionList:[],deptList:e.deptList,examineErrorHandling:e.examineErrorHandling,roleId:e.roleId,type:e.type,userList:e.userList||[],chooseType:e.chooseType,rangeType:e.rangeType,parentLevel:1,tempParentLevel:1,overType:1,isError:!1};return 5===e.examineType?1===e.type?0===e.parentLevel?(i.overType=0,i.parentLevel=1):(i.overType=1,i.parentLevel=e.parentLevel):2===e.type&&(i.overType=1,i.parentLevel=1,i.tempParentLevel=e.parentLevel):i.parentLevel=e.parentLevel,e.roleId&&(i.roleObj={},this.getRoleList().then(function(n){t.getRoleObj(e.roleId,n,i)})),i},getConditionNodeInfo:function(e,t){var i=this,n={conditionName:e.conditionName,sort:t+1,conditionDataList:[],examineDataList:[],isError:!1};return e.conditionDataList.forEach(function(e){var t={name:e.name,fieldName:e.fieldName,fieldId:e.fieldId,type:e.type,conditionType:e.conditionType};if(3===e.type||9===e.type)t.values=e.values,i.validateSetting(t);else if(6===e.conditionType)e.values&&4===e.values.length?(t.leftValue=parseInt(e.values[0]),t.leftCondition=parseInt(e.values[1]),t.rightCondition=parseInt(e.values[2]),t.rightValue=parseInt(e.values[3])):(t.leftValue=0,t.leftCondition=1,t.rightCondition=1,t.rightValue=0),t.values=0;else if(8===e.conditionType){var o=e.values;t.values={deptList:o.deptList.map(function(e){return e.deptId}),roleList:o.roleList,userList:o.userList.map(function(e){return e.userId})},t.deptList=o.deptList,t.userList=o.userList,t.roleList=[],o.roleList.length>0&&i.getRoleList().then(function(e){i.getRoleItems(o.roleList,e,t.roleList)})}else t.leftValue=0,t.leftCondition=1,t.rightCondition=1,t.rightValue=0,e.values&&e.values.length>0?t.values=e.values[0]:t.values=0;n.conditionDataList.push(t)}),n},validateSetting:function(e){},getRoleList:function(){var e=this;return new o.a(function(t,i){e.wkRoleOption.length>0?t(e.wkRoleOption):Object(a.l)().then(function(i){e.wkRoleOption=i.data||[],t(e.wkRoleOption)}).catch(function(){})})},getRoleItems:function(e,t,i){for(var n=0;n<t.length;n++){var o=t[n];if(e.includes(o.roleId)&&(i.push(o),e.length===i.length))break;o.list&&this.getRoleItems(e,o.list,i)}},getRoleObj:function(e,t,i){for(var n=0;n<t.length;n++){var o=t[n];if(o.roleId===e){i.roleObj=o;break}o.list&&this.getRoleObj(e,o.list,i)}},getConditonWrapInfo:function(e){var t=this,i={examineType:e.examineType,name:e.name,conditionList:[]};return e.conditionList.forEach(function(e,n){var o=t.getConditionNodeInfo(e,n);i.conditionList.push(o),t.getListInfo(e.examineDataList,o.examineDataList)}),i}}}},OWxI:function(e,t,i){"use strict";var n=i("uy8d");i.n(n).a},PhsT:function(e,t,i){},Q3iG:function(e,t,i){"use strict";var n={name:"WkBackgroudTabs",components:{},props:{value:[String,Number],options:Array},data:function(){return{}},computed:{},watch:{},created:function(){},mounted:function(){},beforeDestroy:function(){},methods:{tabsClick:function(e,t){this.$emit("input",e.value),this.$emit("tab-click",e,t)}}},o=(i("WeR8"),i("KHd+")),a=Object(o.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("flexbox",{staticClass:"wk-backgroud-tabs",staticStyle:{width:"auto"},attrs:{justify:"space-between",align:"center"}},[i("flexbox",{staticStyle:{width:"auto","z-index":"1"},attrs:{align:"center"}},[e._t("left")],2),e._v(" "),i("div",{staticClass:"wk-tabs__wrap"},[i("div",{staticClass:"wk-tabs"},e._l(e.options,function(t,n){return i("div",{key:n,staticClass:"wk-tabs__item",class:{active:t.value===e.value},on:{click:function(i){e.tabsClick(t,n)}}},[e._v("\n        "+e._s(t.label)+"\n      ")])}))]),e._v(" "),i("flexbox",{staticStyle:{width:"auto","z-index":"1"},attrs:{align:"center"}},[e._t("right")],2)],1)},[],!1,null,"5e9c35a4",null);a.options.__file="WkBackgroudTabs.vue";t.a=a.exports},Q7Z5:function(e,t,i){"use strict";var n={name:"AddNodeBtn",components:{},props:{},data:function(){return{popoverShow:!1}},computed:{},watch:{},created:function(){},mounted:function(){},beforeDestroy:function(){},methods:{selectClick:function(e){this.popoverShow=!1,this.$emit("command",e)}}},o=i("KHd+"),a=Object(o.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"add-node-btn"},[i("el-popover",{attrs:{"visible-arrow":!1,placement:"right",trigger:"click","popper-class":"no-padding-popover"},model:{value:e.popoverShow,callback:function(t){e.popoverShow=t},expression:"popoverShow"}},[i("div",{staticClass:"add-node-approve"},[i("div",{staticClass:"add-node-approve-btn",on:{click:function(t){e.selectClick("approve")}}},[i("i",{staticClass:"wk wk-associate is-orange"}),e._v("审批人\n      ")]),e._v(" "),i("div",{staticClass:"add-node-approve-btn",on:{click:function(t){e.selectClick("condition")}}},[i("i",{staticClass:"wk wk-approve is-green"}),e._v("条件分支\n      ")])]),e._v(" "),i("el-button",{attrs:{slot:"reference",type:"primary",icon:"el-icon-plus",circle:""},slot:"reference"})],1)],1)},[],!1,null,null,null);a.options.__file="AddNodeBtn.vue";var s=a.exports,l={examineType:1,name:"审批人",conditionList:[],deptList:[],examineErrorHandling:2,parentLevel:1,tempParentLevel:1,roleId:"",type:1,userList:[],chooseType:1,overType:1,rangeType:1,isError:!1},r={examineType:0,name:"",conditionList:[{conditionName:"条件",conditionDataList:[],examineDataList:[],isError:!1},{conditionName:"条件",conditionDataList:[],examineDataList:[],isError:!1}]},c={conditionName:"条件",conditionDataList:[],examineDataList:[],isError:!1},d=i("7Qib"),u=[{label:"属于",value:7}],p=[{label:"完全等于",value:11},{label:"包含任意",value:7}],v=[{label:"小于",value:3},{label:"大于",value:2},{label:"小于等于",value:5},{label:"等于",value:1},{label:"大于等于",value:4},{label:"介于(两个数之间)",value:6}],f=[{label:"<",value:1},{label:"≤",value:2}];function h(e){var t={};return e.forEach(function(e){t[e.value]=e.label}),t}function m(e){return{name:"发起人",conditionType:8,userList:[],deptList:[],roleList:[],values:{userList:[],deptList:[],roleList:[]},checked:e}}var b=i("a/5N"),_={name:"WkConditionNode",components:{AddNodeBtn:s},props:{index:Number,parent:Array,conditionParent:Array,node:{type:Object,default:function(){return{}}}},data:function(){return{selectOptionsObj:h(u),checkboxOptionsObj:h(p),numberOptionsObj:h(v),numberValueOptionsObj:h(f),isEdit:!1}},computed:{},watch:{},created:function(){},mounted:function(){},beforeDestroy:function(){},methods:{nameInputBlur:function(){this.isEdit=!1,""===this.node.conditionName&&(this.node.conditionName="条件")},titleEditClick:function(){var e=this;this.disabled||(this.isEdit=!0,this.$nextTick(function(){e.$refs.wkFlowInput.focus()}))},deleteClick:function(){this.$emit("delete")},handleCommand:function(e){"approve"===e?this.parent.splice(0,0,Object(d.t)(l)):"condition"===e&&this.parent.splice(0,0,Object(d.t)(r))},click:function(){this.$emit("node-click",this.$props)},getConditonContent:function(){var e=this;return this.node.conditionDataList.map(function(t){if(3===t.type){var i=t.values;if(t.setting){var n=[];t.setting.forEach(function(e){void 0!=e.value&&t.values.includes(e.value)&&n.push(e.label)}),n.length>0&&(i=n)}return t.name+" "+e.selectOptionsObj[t.conditionType]+" "+i.join("或")}return 9===t.type?t.name+" "+e.checkboxOptionsObj[t.conditionType]+" "+t.values.join("、"):6===t.conditionType?(Object(b.b)(t.leftValue)?"":t.leftValue)+" "+e.numberValueOptionsObj[t.leftCondition]+" "+t.name+" "+e.numberValueOptionsObj[t.rightCondition]+" "+(Object(b.b)(t.rightValue)?"":t.rightValue):8===t.conditionType?t.name+"属于 "+t.deptList.map(function(e){return e.name}).join("或")+(t.deptList.length>0&&t.userList.length>0?"或":"")+t.userList.map(function(e){return e.realname}).join("或")+(t.userList.length>0&&t.roleList.length>0?"或":"")+t.roleList.map(function(e){return e.roleName}).join("或"):t.name+" "+e.numberOptionsObj[t.conditionType]+" "+t.values}).join(" 并且 ")}}},y=(i("KMeb"),Object(o.a)(_,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"condition-node"},[i("div",{staticClass:"condition-node-wrap"},[i("div",{staticClass:"condition-wrap",class:{"is-error":e.node.isError},on:{click:e.click}},[i("div",{staticClass:"header"},[e.isEdit?i("el-input",{ref:"wkFlowInput",attrs:{type:"text",size:"mini",maxlength:"20"},on:{blur:e.nameInputBlur},model:{value:e.node.conditionName,callback:function(t){e.$set(e.node,"conditionName",t)},expression:"node.conditionName"}}):i("span",{staticClass:"title",on:{click:function(t){return t.stopPropagation(),e.titleEditClick(t)}}},[e._v(e._s(e.node.conditionName))]),e._v(" "),i("span",{staticClass:"priority"},[e._v("优先级"+e._s(e.index+1))]),e._v(" "),i("i",{staticClass:"el-icon-close close",on:{click:function(t){return t.stopPropagation(),e.deleteClick(t)}}})],1),e._v(" "),i("div",{staticClass:"content"},[e.node.conditionDataList&&e.node.conditionDataList.length>0?[e._v("\n          "+e._s(e.getConditonContent())+"\n        ")]:[e._v("\n          无条件\n        ")]],2)]),e._v(" "),i("add-node-btn",{on:{command:e.handleCommand}})],1)])},[],!1,null,"0b7fb9ca",null));y.options.__file="WkConditionNode.vue";var k=y.exports,g=i("7szD"),C={name:"WkNode",components:{AddNodeBtn:s},mixins:[],props:{visibleArrow:{type:Boolean,default:!0},index:Number,disabled:{type:Boolean,default:!1},headerColor:{type:String,default:"#f78b22"},parent:Array,node:{type:Object,default:function(){return{}}}},data:function(){return{isEdit:!1,examineTypeObj:g.a,sendLevelObj:{},topLevelObj:{},levelObj:{}}},computed:{},watch:{},created:function(){for(var e=1;e<=20;e++){var t="第"+e+"级上级";this.levelObj[e]=t,1===e?(this.sendLevelObj[e]="直属上级",this.topLevelObj[e]="最高级上级"):(this.sendLevelObj[e]=t,this.topLevelObj[e]=t)}},mounted:function(){},beforeDestroy:function(){},methods:{titleEditClick:function(){var e=this;this.disabled||(this.isEdit=!0,this.$nextTick(function(){e.$refs.wkFlowInput.focus()}))},deleteClick:function(){this.parent.splice(this.index,1)},handleCommand:function(e){"approve"===e?this.parent.splice(this.index+1,0,Object(d.t)(l)):"condition"===e&&this.parent.splice(this.index+1,0,Object(d.t)(r))},getContent:function(){var e=this.node,t=e.examineType,i=e.type,n=e.userList,o=e.parentLevel,a=e.roleId,s=e.roleObj,l=e.overType,r=e.tempParentLevel,c=g.a[t];return 1===t?1===n.length?c+" 1人":n.length>1?n.length+"人"+g.b[i]:"请选择审批人":2===t?""+this.sendLevelObj[o]:3===t?a?""+s.roleName+g.b[i]:"请选择审批人":4===t?a?"发起人从"+s.roleName+"中自选":c:5===t?1===i?a?0===l?"从 直属上级 到 "+s.roleName:1===l?"从 直属上级 到 发起人向上的"+this.levelObj[o]:"":"请选择审批人":"从 直属上级 到 组织架构中由上至下的"+this.topLevelObj[r]:""},click:function(){this.disabled||this.$emit("node-click",this.$props)}}},x=(i("J5zA"),Object(o.a)(C,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"wk-node"},[i("div",{staticClass:"wk-node-wrap",class:{"is-first":!e.visibleArrow,"is-error":e.node.isError,"is-disabled":e.disabled},on:{click:e.click}},[i("div",{staticClass:"header",style:{backgroundColor:e.headerColor}},[e.isEdit?i("el-input",{ref:"wkFlowInput",attrs:{type:"text",size:"mini"},on:{blur:function(t){e.isEdit=!1}},model:{value:e.node.name,callback:function(t){e.$set(e.node,"name",t)},expression:"node.name"}}):i("span",{staticClass:"title",on:{click:function(t){return t.stopPropagation(),e.titleEditClick(t)}}},[e._v(e._s(e.node.name))]),e._v(" "),e.disabled?e._e():i("i",{staticClass:"el-icon-close close",on:{click:function(t){return t.stopPropagation(),e.deleteClick(t)}}})],1),e._v(" "),i("div",{staticClass:"body"},[e.disabled?i("div",{staticClass:"content"},[e._v(e._s(e.node.content))]):i("div",{staticClass:"content"},[e._v(e._s(e.getContent()))]),e._v(" "),e.disabled?e._e():i("i",{staticClass:"el-icon-arrow-right"})])]),e._v(" "),i("div",{staticClass:"add-node-btn-wrap"},[i("add-node-btn",{on:{command:e.handleCommand}})],1)])},[],!1,null,"d4a3cd84",null));x.options.__file="WkNode.vue";var N=x.exports,L={name:"WkConditionWrap",components:{AddNodeBtn:s,WkNode:N,WkConditionNode:k},props:{index:Number,parent:Array,node:{type:Object,default:function(){return{}}}},data:function(){return{tree:null}},computed:{},watch:{},created:function(){"WkConditionWrap"===this.$parent.$options.name?this.tree=this.$parent.tree:this.tree=this},mounted:function(){},beforeDestroy:function(){},methods:{addClick:function(){this.node.conditionList.push(Object(d.t)(c))},conditionDelete:function(e){this.node.conditionList.length>2?this.node.conditionList.splice(e,1):this.parent.splice(this.index,1)},handleCommand:function(e){"approve"===e?this.parent.splice(this.index+1,0,Object(d.t)(l)):"condition"===e&&this.parent.splice(this.index+1,0,Object(d.t)(r))},nodeClick:function(e){this.tree.$emit("node-click",e)}}},w=(i("k1Uw"),Object(o.a)(L,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"wk-conditon-node"},[i("div",{staticClass:"wk-conditon-node-wrap"},[i("div",{staticClass:"conditon-wrap-body"},[i("el-button",{staticClass:"add-btn",attrs:{plain:""},on:{click:e.addClick}},[e._v("添加条件")]),e._v(" "),e._l(e.node.conditionList,function(t,n){return i("div",{key:n,staticClass:"condition"},[0===n?[i("div",{staticClass:"cover-line is-top-left"}),e._v(" "),i("div",{staticClass:"cover-line is-bottom-left"})]:e._e(),e._v(" "),n===e.node.conditionList.length-1?[i("div",{staticClass:"cover-line is-top-right"}),e._v(" "),i("div",{staticClass:"cover-line is-bottom-right"})]:e._e(),e._v(" "),i("wk-condition-node",{attrs:{index:n,parent:t.examineDataList,"condition-parent":e.node.conditionList,node:t},on:{delete:function(t){e.conditionDelete(n)},"node-click":e.nodeClick}}),e._v(" "),t.examineDataList&&t.examineDataList.length>0?[e._l(t.examineDataList,function(n,o){return[0===n.examineType?i("wk-condition-wrap",{key:o,attrs:{index:o,node:n,parent:t.examineDataList}}):i("wk-node",{key:o,attrs:{index:o,node:n,parent:t.examineDataList},on:{"node-click":e.nodeClick}})]})]:e._e()],2)})],2),e._v(" "),i("div",{staticClass:"add-node-btn-wrap"},[i("add-node-btn",{on:{command:e.handleCommand}})],1)])])},[],!1,null,null,null));w.options.__file="WkConditionWrap.vue";var T=w.exports,O={name:"WkEndNode",components:{},props:{},data:function(){return{}},computed:{},watch:{},created:function(){},mounted:function(){},beforeDestroy:function(){},methods:{}},S=(i("OWxI"),Object(o.a)(O,function(){this.$createElement;this._self._c;return this._m(0)},[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"wk-end-node"},[t("div",{staticClass:"circle"}),this._v(" "),t("div",{staticClass:"text"},[this._v("流程结束")])])}],!1,null,"32d3214e",null));S.options.__file="WkEndNode.vue";var E=S.exports,j=i("QbLZ"),$=i.n(j),I={name:"WkConditionSelect",components:{},inheritAttrs:!1,props:{visible:{type:Boolean,required:!0,default:!1},checks:Array,props:{type:Object,default:function(){return{}}}},data:function(){return{list:[]}},computed:{},watch:{visible:function(e){e&&this.getList()}},methods:{handleConfirm:function(){this.$emit("confirm",this.list.filter(function(e){return e.checked})),this.handleCancel()},getList:function(){var e=this,t=this.props,i=t.conditionSelectRequest,n=t.conditionSelectParams,o=t.conditionSelectList;o?this.handleList(Object(d.t)(o)):i(n).then(function(t){var i=t.data||[];e.handleList(i)}).catch(function(){})},handleList:function(e){var t=this,i=[],n=null;this.checks&&this.checks.forEach(function(e){e.fieldName?i.push(e.fieldName):8===e.conditionType&&(n=e)});var o=[];e.forEach(function(e,n){i.includes(e.fieldName)?(o.push(n),t.$set(e,"checked",!0)):t.$set(e,"checked",!1)}),o.forEach(function(i){var n=e[i],o=t.checks.find(function(e){return e.fieldName===n.fieldName});t.$set(o,"checked",!0),e.splice(i,1,o)}),n?(this.$set(n,"checked",!0),e.splice(0,0,n),this.list=e):(e.splice(0,0,Object(d.t)(m(!1))),this.list=e)},handleCancel:function(){this.$emit("update:visible",!1)}}},D=(i("HTer"),Object(o.a)(I,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{visible:e.visible,"append-to-body":!0,"close-on-click-modal":!1,title:"选择条件",width:"600px","custom-class":"no-padding-dialog"},on:{close:e.handleCancel}},[i("div",{staticStyle:{padding:"20px"}},[i("div",[e._v("请选择用来区分审批流程的条件字段 ")]),e._v(" "),i("div",{staticStyle:{"margin-top":"10px"}},e._l(e.list,function(t,n){return i("el-checkbox",{key:n,attrs:{label:t.name},model:{value:t.checked,callback:function(i){e.$set(t,"checked",i)},expression:"item.checked"}})}))]),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{nativeOn:{click:function(t){return e.handleCancel(t)}}},[e._v("取消")]),e._v(" "),i("el-button",{directives:[{name:"debounce",rawName:"v-debounce",value:e.handleConfirm,expression:"handleConfirm"}],attrs:{type:"primary"}},[e._v("确定")])],1)])},[],!1,null,"37b9c0a5",null));D.options.__file="WkConditionSelect.vue";var V=D.exports,P=i("t2rG"),W=i.n(P),A=i("jPAu"),B=i("lNRB"),R={name:"WkConditionSet",components:{WkConditionSelect:V,Draggable:W.a,WkUserDepSelect:A.a,RoleEmployeeSelect:B.a},props:{visible:{type:Boolean,required:!0,default:!1},node:{type:Object,default:function(){return{}}},conditionParent:Array,conditionParentIndex:Number,props:{type:Object,default:function(){return{}}}},data:function(){return{editNode:null,isNameEdit:!1,selectOptions:u,checkboxOptions:p,numberOptions:v,numberValueOptions:f,conditionSelectVisible:!1,dragList:[]}},computed:{},watch:{visible:function(e){var t=this;if(e){var i=Object(d.t)(this.conditionParent);this.editNode=i[this.conditionParentIndex],0===this.editNode.conditionDataList.length?this.editNode.conditionDataList.push(m(!0)):this.validateSetting(this.editNode.conditionDataList),i.forEach(function(e,t){e.index=t}),this.dragList=i}else{var n=Object(d.t)(this.conditionParent);this.conditionParent.splice(0,this.conditionParent.length),this.dragList.forEach(function(e){t.conditionParent.push(n[e.index])}),this.editNode=null}}},created:function(){},mounted:function(){},beforeDestroy:function(){},methods:{validateSetting:function(e){var t=this,i=[];if(e.forEach(function(e){3!==e.type&&9!==e.type||e.setting||i.push(e)}),i&&i.length>0){var n=this.props,o=n.conditionSelectRequest,a=n.conditionSelectParams,s=n.conditionSelectList;if(s){var l=Object(d.t)(s);i.forEach(function(e){var i=l.find(function(t){return t.fieldName===e.fieldName});i&&t.$set(e,"setting",i.setting)})}else o(a).then(function(e){var n=e.data||[];i.forEach(function(e){var i=n.find(function(t){return t.fieldName===e.fieldName});i&&t.$set(e,"setting",i.setting)})}).catch(function(){})}},nameInputBlur:function(){this.isNameEdit=!1,""===this.editNode.conditionName&&(this.editNode.conditionName="条件")},titleEditClick:function(){var e=this;this.isNameEdit=!0,this.$nextTick(function(){e.$refs.conditionNameInput.focus()})},close:function(){this.$emit("update:visible",!1)},handleConfirm:function(){var e=this.editNode.conditionDataList||[];for(var t in this.editNode.conditionDataList=e.filter(function(e){return 3===e.type||9===e.type?e.values&&e.values.length>0:6===e.conditionType?!Object(b.b)(e.leftValue)&&!Object(b.b)(e.rightValue)&&e.leftValue<e.rightValue:8===e.conditionType?!Object(b.b)(e.userList)||!Object(b.b)(e.deptList)||!Object(b.b)(e.roleList):!Object(b.b)(e.values)}),this.editNode.isError=!1,this.editNode)"examineDataList"!==t&&(this.node[t]=this.editNode[t]);this.close()},conditionSelectClick:function(){this.conditionSelectVisible=!0},deleteItem:function(e){var t=this;this.$confirm("确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.editNode.conditionDataList.splice(e,1)}).catch(function(){})},conditionSelectConfirm:function(e){e.forEach(function(e){e.conditionType||(3===e.type||9===e.type?(e.conditionType=3===e.type?7:11,e.values=[]):5!==e.type&&6!==e.type||(e.conditionType=3,e.values=0,e.leftValue=0,e.leftCondition=1,e.rightCondition=1,e.rightValue=0))}),this.editNode.conditionDataList=Object(d.t)(e)},userDepSelectChange:function(e,t){var i=e[2],n=e[3];t.userList=i,t.deptList=n},roleSelectChange:function(e){var t=this;this.$nextTick(function(){var i=t.$refs.roleSelect[0].select.selected;e.roleList=i.map(function(e){return{roleName:e.$props.label}})})}}},F=(i("d3Hm"),Object(o.a)(R,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-drawer",{attrs:{visible:e.visible,"with-header":!1,size:"500px",title:"我是标题","append-to-body":""},on:{close:e.close}},[e.editNode?i("flexbox",{staticClass:"drawer-header"},[i("div",{staticClass:"edit-title"},[e.isNameEdit?i("el-input",{ref:"conditionNameInput",attrs:{maxlength:"20"},on:{blur:e.nameInputBlur},model:{value:e.editNode.conditionName,callback:function(t){e.$set(e.editNode,"conditionName",t)},expression:"editNode.conditionName"}}):[i("span",{staticClass:"title",on:{click:e.titleEditClick}},[e._v(e._s(e.editNode.conditionName))]),e._v(" "),i("i",{staticClass:"wk wk-edit",on:{click:e.titleEditClick}})]],2),e._v(" "),i("el-popover",{attrs:{placement:"bottom",width:"200",trigger:"click"}},[i("draggable",{attrs:{options:{group:"list",forceFallback:!1,fallbackClass:"draggingStyle",filter:"drag-item__label",preventOnFilter:!1}},model:{value:e.dragList,callback:function(t){e.dragList=t},expression:"dragList"}},e._l(e.dragList,function(t,n){return i("flexbox",{key:n,staticClass:"drag-item"},[i("div",{staticClass:"drag-item__label"},[e._v(e._s(t.conditionName))]),e._v(" "),i("div",{staticClass:"drag-item__handle"},[e._v("⋮⋮")])])})),e._v(" "),i("el-button",{attrs:{slot:"reference",type:"text"},slot:"reference"},[e._v("优先级设置")])],1),e._v(" "),i("el-tooltip",{attrs:{effect:"dark",placement:"bottom"}},[i("template",{slot:"content"},[e._v("\n        首先匹配“优先级高”的条件。"),i("br"),e._v("如果匹配成功则审批单发送给该条件下的审批人；"),i("br"),e._v("如果匹配不成功则继续进行匹配下一优先级的条件。\n      ")]),e._v(" "),i("i",{staticClass:"wk wk-help wk-help-tips"})],2),e._v(" "),i("i",{staticClass:"el-icon-close ",on:{click:e.close}})],1):e._e(),e._v(" "),e.editNode?i("div",{staticClass:"drawer-body"},[e._l(e.editNode.conditionDataList,function(t,n){return i("el-row",{key:n,staticClass:"set-row",attrs:{gutter:20,type:"flex",align:"middle"}},[i("el-col",{staticClass:"set-row__title",attrs:{span:5}},[e._v(e._s(t.name))]),e._v(" "),i("el-col",{staticClass:"set-row__center",attrs:{span:17}},[8===t.conditionType?i("flexbox",[i("div",{staticStyle:{flex:"1"}},[i("wk-user-dep-select",{staticStyle:{width:"100%"},attrs:{"user-value":t.values.userList,"dep-value":t.values.deptList,placeholder:"请选择员工或部门"},on:{"update:userValue":function(i){e.$set(t.values,"userList",i)},"update:depValue":function(i){e.$set(t.values,"deptList",i)},change:function(i){e.userDepSelectChange(arguments,t)}}}),e._v(" "),i("role-employee-select",{ref:"roleSelect",refInFor:!0,staticStyle:{width:"100%","margin-top":"8px"},attrs:{props:{onlyShowRole:!0},multiple:"",placeholder:"请选择角色","collapse-tags":"",clearable:""},on:{change:function(i){e.roleSelectChange(t)}},model:{value:t.values.roleList,callback:function(i){e.$set(t.values,"roleList",i)},expression:"item.values.roleList"}})],1),e._v(" "),i("div",{staticStyle:{"flex-shrink":"0","margin-left":"8px"}},[e._v("或")])]):[9,3].includes(t.type)?[3==t.type?i("el-select",{staticClass:"condition-select",model:{value:t.conditionType,callback:function(i){e.$set(t,"conditionType",i)},expression:"item.conditionType"}},e._l(e.selectOptions,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})):9==t.type?i("el-select",{staticClass:"condition-select",model:{value:t.conditionType,callback:function(i){e.$set(t,"conditionType",i)},expression:"item.conditionType"}},e._l(e.checkboxOptions,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})):e._e(),e._v(" "),i("el-select",{staticClass:"condition-value",attrs:{multiple:""},model:{value:t.values,callback:function(i){e.$set(t,"values",i)},expression:"item.values"}},e._l(t.setting,function(e,t){return i("el-option",{key:t,attrs:{label:void 0!==e.value?e.label:e,value:void 0!==e.value?e.value:e}})}))]:[i("el-select",{class:["condition-select",{"is-block":6===t.conditionType}],model:{value:t.conditionType,callback:function(i){e.$set(t,"conditionType",i)},expression:"item.conditionType"}},e._l(e.numberOptions,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),6===t.conditionType?[i("div",{staticStyle:{"margin-top":"10px"}},[i("el-input-number",{staticClass:"small",attrs:{controls:!1},model:{value:t.leftValue,callback:function(i){e.$set(t,"leftValue",i)},expression:"item.leftValue"}}),e._v(" "),i("el-select",{staticClass:"small is-condition",model:{value:t.leftCondition,callback:function(i){e.$set(t,"leftCondition",i)},expression:"item.leftCondition"}},e._l(e.numberValueOptions,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),i("span",{staticClass:"small-select-label"},[e._v(e._s(t.name))]),e._v(" "),i("el-select",{staticClass:"small is-condition",model:{value:t.rightCondition,callback:function(i){e.$set(t,"rightCondition",i)},expression:"item.rightCondition"}},e._l(e.numberValueOptions,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),i("el-input-number",{staticClass:"small",attrs:{controls:!1},model:{value:t.rightValue,callback:function(i){e.$set(t,"rightValue",i)},expression:"item.rightValue"}})],1)]:i("el-input-number",{staticClass:"condition-value",attrs:{controls:!1},model:{value:t.values,callback:function(i){e.$set(t,"values",i)},expression:"item.values"}})]],2),e._v(" "),i("el-col",{staticClass:"set-row__footer",attrs:{span:1}},[i("i",{staticClass:"wk wk-delete",on:{click:function(t){e.deleteItem(n)}}})])],1)}),e._v(" "),i("div",[i("el-button",{attrs:{type:"text",icon:"el-icon-plus"},on:{click:e.conditionSelectClick}},[e._v("添加条件")]),e._v(" "),i("el-tooltip",{attrs:{effect:"dark",placement:"bottom"}},[i("template",{slot:"content"},[i("div",{staticStyle:{"font-weight":"bold"}},[e._v("如何添加条件字段？")]),e._v(" "),i("div",{staticStyle:{"margin-top":"10px","line-height":"15px"}},[e._v("可在编辑表单中添加数字、货币、"),i("br"),e._v("下拉框或多选字段并设为必填。")])]),e._v(" "),i("i",{staticClass:"wk wk-help wk-help-tips"})],2)],1)],2):e._e(),e._v(" "),i("div",{staticClass:"drawer-footer"},[i("el-button",{nativeOn:{click:function(t){return e.close(t)}}},[e._v("取消")]),e._v(" "),i("el-button",{directives:[{name:"debounce",rawName:"v-debounce",value:e.handleConfirm,expression:"handleConfirm"}],attrs:{type:"primary"}},[e._v("保存")])],1),e._v(" "),i("wk-condition-select",{attrs:{props:e.props,checks:e.editNode?e.editNode.conditionDataList:[],visible:e.conditionSelectVisible},on:{"update:visible":function(t){e.conditionSelectVisible=t},confirm:e.conditionSelectConfirm}})],1)},[],!1,null,"d8a53f4a",null));F.options.__file="WkConditionSet.vue";var U=F.exports,H=i("4X7d"),q=i("LGWg"),z=i("XAon"),K={methods:{getWkWayShowStatus:function(e){return!!e&&(1===e.examineType&&e.userList.length>1||3===e.examineType&&e.roleId||4===e.examineType&&2===e.chooseType&&(1===e.rangeType||2===e.rangeType&&e.userList.length>1||3===e.rangeType&&e.roleId))},getWkNodeErrorStatus:function(e){return 1===e.examineType?0===e.userList.length:2!==e.examineType&&(3===e.examineType?Object(b.b)(e.roleId):4===e.examineType?2===e.rangeType?0===e.userList.length:3===e.rangeType&&Object(b.b)(e.roleId):5===e.examineType?1===e.type?Object(b.b)(e.roleId):2===e.type&&Object(b.b)(e.tempParentLevel):void 0)}}},Z={name:"WkNodeSet",components:{WkDepUserViewDialog:q.a,WkUserSelect:z.a,RoleEmployeeSelect:B.a},mixins:[K],props:{visible:{type:Boolean,required:!0,default:!1},node:{type:Object,default:function(){return{}}},props:{type:Object,default:function(){return{}}}},data:function(){return{editNode:null,isNameEdit:!1,examineTypeOptions:[{label:"指定成员",value:1},{label:"上级",value:2},{label:"角色",value:3},{label:"发起人自选",value:4},{label:"连续多级上级",value:5}],sendLevelOption:[],topLevelOption:[],levelOption:[],depUserViewDialogShow:!1}},computed:{waySectionShow:function(){return this.getWkWayShowStatus(this.editNode)},userRequest:function(){return H.b}},watch:{visible:function(e){this.editNode=e?Object(d.t)(this.node):null}},created:function(){for(var e=1;e<=20;e++){var t="第"+e+"级上级";this.levelOption.push({label:t,value:e}),1===e?(this.sendLevelOption.push({label:"直属上级",value:e}),this.topLevelOption.push({label:"最高级上级",value:e})):(this.sendLevelOption.push({label:t,value:e}),this.topLevelOption.push({label:t,value:e}))}},mounted:function(){},beforeDestroy:function(){},methods:{nameInputBlur:function(){this.isNameEdit=!1,""===this.editNode.name&&(this.editNode.name="审批人")},close:function(){this.$emit("update:visible",!1)},handleConfirm:function(){for(var e in this.editNode.isError=this.getWkNodeErrorStatus(this.editNode),this.editNode)"conditionList"!==e&&(this.node[e]=this.editNode[e]);this.close()},examineTypeChange:function(){this.editNode.parentLevel=1,this.editNode.userList=[],2===this.editNode.examineType?this.editNode.type=1:2===this.editNode.examineType?this.editNode.type=0:3===this.editNode.examineType?this.editNode.type=2:4===this.editNode.examineType&&(this.editNode.rangeType||(this.editNode.rangeType=1),this.editNode.chooseType=1,this.editNode.type=1),this.editNode.examineErrorHandling=2,this.editNode.roleId="",this.editNode.chooseType=1},selectUserChange:function(e,t){e.length>0?1===this.editNode.examineType?(this.editNode.userList=e.length>20?e.slice(0,20):e,this.editNode.type=1):this.editNode.userList=e:this.editNode.userList=[]},userDelete:function(e){this.editNode.userList.splice(e,1)},rangeTypeChange:function(){this.editNode.userList=[],this.editNode.roleId="",this.editNode.type=1},endTypeChange:function(){this.editNode.overType=0},roleSelectChange:function(){var e=this;this.$nextTick(function(){e.editNode.roleId?e.$set(e.editNode,"roleObj",{roleName:e.$refs.roleSelect.select.selectedLabel}):e.$set(e.editNode,"roleObj",null)})}}},G=(i("Sh3n"),i("LrLK"),Object(o.a)(Z,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-drawer",{attrs:{visible:e.visible,"with-header":!1,size:"500px",title:"我是标题","append-to-body":""},on:{close:e.close}},[e.editNode?i("flexbox",{staticClass:"drawer-header"},[i("div",{staticClass:"edit-title"},[e.isNameEdit?i("el-input",{attrs:{maxlength:"20"},on:{blur:e.nameInputBlur},model:{value:e.editNode.name,callback:function(t){e.$set(e.editNode,"name",t)},expression:"editNode.name"}}):[i("span",{staticClass:"title",on:{click:function(t){e.isNameEdit=!0}}},[e._v(e._s(e.editNode.name))]),e._v(" "),i("i",{staticClass:"wk wk-edit",on:{click:function(t){e.isNameEdit=!0}}})]],2),e._v(" "),i("i",{staticClass:"el-icon-close ",on:{click:e.close}})]):e._e(),e._v(" "),e.editNode?i("div",{staticClass:"drawer-body"},[i("div",{staticClass:"section"},[i("el-radio-group",{on:{change:e.examineTypeChange},model:{value:e.editNode.examineType,callback:function(t){e.$set(e.editNode,"examineType",t)},expression:"editNode.examineType"}},e._l(e.examineTypeOptions,function(t,n){return i("el-radio",{key:n,staticClass:"el-radio--type",attrs:{label:t.value}},[e._v(e._s(t.label))])})),e._v(" "),1===e.editNode.examineType?i("div",{staticClass:"area-top"},[i("div",{staticClass:"section-handle"},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.depUserViewDialogShow=!0}}},[e._v("添加员工")]),e._v(" "),i("span",{staticClass:"text-des"},[e._v("不能超过20人")])],1),e._v(" "),i("div",{staticClass:"user-list-wrap"},e._l(e.editNode.userList,function(t,n){return i("span",{key:n,staticClass:"user-item"},[e._v("\n            "+e._s(t.realname)+"\n            "),i("i",{staticClass:"el-icon-close",on:{click:function(t){e.userDelete(n)}}})])}))]):e._e(),e._v(" "),2===e.editNode.examineType?i("div",{staticClass:"area-top"},[i("div",{staticClass:"section-handle"},[i("span",[e._v("发起人的")]),e._v(" "),i("el-select",{model:{value:e.editNode.parentLevel,callback:function(t){e.$set(e.editNode,"parentLevel",t)},expression:"editNode.parentLevel"}},e._l(e.sendLevelOption,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),i("div",{staticClass:"area-top wk-checkbox"},[i("el-checkbox",{attrs:{"true-label":1,"false-label":0},model:{value:e.editNode.type,callback:function(t){e.$set(e.editNode,"type",t)},expression:"editNode.type"}}),e._v(" "),i("span",{staticClass:"wk-checkbox__label"},[e._v("找不到主管时，由上级主管代审批")])],1)]):e._e(),e._v(" "),3===e.editNode.examineType?i("div",{staticClass:"area-top"},[i("role-employee-select",{ref:"roleSelect",attrs:{props:{onlyShowRole:!0},clearable:""},on:{change:e.roleSelectChange},model:{value:e.editNode.roleId,callback:function(t){e.$set(e.editNode,"roleId",t)},expression:"editNode.roleId"}})],1):e._e(),e._v(" "),4===e.editNode.examineType?i("div",{staticClass:"area-top"},[i("div",{staticClass:"section-handle"},[i("el-select",{model:{value:e.editNode.chooseType,callback:function(t){e.$set(e.editNode,"chooseType",t)},expression:"editNode.chooseType"}},[i("el-option",{attrs:{value:1,label:"自选一人"}}),e._v(" "),i("el-option",{attrs:{value:2,label:"自选多人"}})],1)],1),e._v(" "),i("div",{staticClass:"area-top"},[i("div",{staticClass:"section__title"},[e._v("选择范围")]),e._v(" "),i("div",{staticClass:"area-top"},[i("el-select",{on:{change:e.rangeTypeChange},model:{value:e.editNode.rangeType,callback:function(t){e.$set(e.editNode,"rangeType",t)},expression:"editNode.rangeType"}},[i("el-option",{attrs:{value:1,label:"全公司"}}),e._v(" "),i("el-option",{attrs:{value:2,label:"指定成员"}}),e._v(" "),i("el-option",{attrs:{value:3,label:"指定角色"}})],1),e._v(" "),2===e.editNode.rangeType?[i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.depUserViewDialogShow=!0}}},[e._v("添加员工")])]:e._e(),e._v(" "),3===e.editNode.rangeType?i("role-employee-select",{ref:"roleSelect",attrs:{props:{onlyShowRole:!0},clearable:""},on:{change:e.roleSelectChange},model:{value:e.editNode.roleId,callback:function(t){e.$set(e.editNode,"roleId",t)},expression:"editNode.roleId"}}):e._e()],2),e._v(" "),2===e.editNode.rangeType&&e.editNode.userList.length>0?i("div",{staticClass:"user-list-wrap",staticStyle:{"margin-top":"8px"}},e._l(e.editNode.userList,function(t,n){return i("span",{key:n,staticClass:"user-item"},[e._v("\n              "+e._s(t.realname)+"\n              "),i("i",{staticClass:"el-icon-close",on:{click:function(t){e.userDelete(n)}}})])})):e._e()])]):e._e(),e._v(" "),5===e.editNode.examineType?i("div",{staticClass:"area-top"},[i("div",{staticClass:"section__title"},[e._v("审批终点")]),e._v(" "),i("el-radio-group",{staticClass:"el-radio-group--block",on:{change:e.endTypeChange},model:{value:e.editNode.type,callback:function(t){e.$set(e.editNode,"type",t)},expression:"editNode.type"}},[i("el-radio",{staticClass:"el-radio--block",attrs:{label:1}},[i("div",[e._v("指定角色（连续多级上级须包含该角色）"),i("role-employee-select",{ref:"roleSelect",attrs:{props:{onlyShowRole:!0},clearable:""},on:{change:e.roleSelectChange},model:{value:e.editNode.roleId,callback:function(t){e.$set(e.editNode,"roleId",t)},expression:"editNode.roleId"}})],1)]),e._v(" "),i("div",{staticClass:"area-top wk-checkbox",staticStyle:{"line-height":"34px","margin-left":"20px"}},[i("el-checkbox",{attrs:{"true-label":1,"false-label":0},model:{value:e.editNode.overType,callback:function(t){e.$set(e.editNode,"overType",t)},expression:"editNode.overType"}}),e._v(" "),i("span",{staticClass:"wk-checkbox__label",staticStyle:{"font-size":"13px","margin-right":"8px"}},[e._v("同时不超过发起人向上的")]),e._v(" "),i("el-select",{model:{value:e.editNode.parentLevel,callback:function(t){e.$set(e.editNode,"parentLevel",t)},expression:"editNode.parentLevel"}},e._l(e.levelOption,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),i("el-radio",{staticClass:"el-radio--block area-top",attrs:{label:2}},[i("span",[e._v("组织架构中由上至下的")]),i("el-select",{staticStyle:{"margin-left":"5px"},model:{value:e.editNode.tempParentLevel,callback:function(t){e.$set(e.editNode,"tempParentLevel",t)},expression:"editNode.tempParentLevel"}},e._l(e.topLevelOption,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1)],1):e._e()],1),e._v(" "),e.waySectionShow?i("div",{staticClass:"section"},[i("div",{staticClass:"section__title"},[i("span",[e._v("多人审批时采用的审批方式")])]),e._v(" "),i("div",{staticClass:"section__content"},[i("el-radio-group",{model:{value:e.editNode.type,callback:function(t){e.$set(e.editNode,"type",t)},expression:"editNode.type"}},[3!==e.editNode.examineType?i("el-radio",{staticClass:"el-radio--block",attrs:{label:1}},[e._v("依次审批")]):e._e(),e._v(" "),i("el-radio",{staticClass:"el-radio--block",attrs:{label:2}},[e._v("会签（需所有审批人同意）")]),e._v(" "),i("el-radio",{staticClass:"el-radio--block",attrs:{label:3}},[e._v("或签（一名审批人同意或拒绝即可）")])],1)],1)]):e._e(),e._v(" "),i("div",{staticClass:"section"},[i("div",{staticClass:"section__title"},[i("span",[e._v("审批人为空时")]),i("el-tooltip",{attrs:{effect:"dark",placement:"top"}},[i("div",{staticClass:"mutil-line-tips",attrs:{slot:"content"},slot:"content"},[i("div",{staticClass:"tips-title"},[e._v("以下任一情况均为审批人为空：")]),e._v(" "),i("div",{staticClass:"tips-line"},[e._v("1、角色或上级为空；")]),e._v(" "),i("div",{staticClass:"tips-line"},[e._v("2、该流程一人审批时审批人请假/离职；")]),e._v(" "),i("div",{staticClass:"tips-line"},[e._v("3、该流程需多人依次审批或会签时审批人请假/离职；")]),e._v(" "),i("div",{staticClass:"tips-line"},[e._v("4、发起的审批不符合任何条件。")])]),e._v(" "),i("i",{staticClass:"wk wk-help wk-help-tips"})])],1),e._v(" "),i("div",{staticClass:"section__content"},[i("el-radio-group",{model:{value:e.editNode.examineErrorHandling,callback:function(t){e.$set(e.editNode,"examineErrorHandling",t)},expression:"editNode.examineErrorHandling"}},[i("el-radio",{staticClass:"el-radio--block",attrs:{label:2}},[e._v("自动转交管理员")])],1)],1)])]):e._e(),e._v(" "),i("div",{staticClass:"drawer-footer"},[i("el-button",{nativeOn:{click:function(t){return e.close(t)}}},[e._v("取消")]),e._v(" "),i("el-button",{directives:[{name:"debounce",rawName:"v-debounce",value:e.handleConfirm,expression:"handleConfirm"}],attrs:{type:"primary"}},[e._v("保存")])],1),e._v(" "),e.depUserViewDialogShow?i("wk-dep-user-view-dialog",{attrs:{props:{canSelectDep:!1,searchParams:{status:1},request:e.userRequest},"user-value":e.editNode.userList,visible:e.depUserViewDialogShow},on:{"update:visible":function(t){e.depUserViewDialogShow=t},change:e.selectUserChange}}):e._e()],1)},[],!1,null,"631ef007",null));G.options.__file="WkNodeSet.vue";var Q=G.exports,Y=i("jtZb"),J={conditionSelectRequest:null,conditionSelectParams:null},M={name:"WkApproveFlow",components:{WkNode:N,WkConditionWrap:T,AddNodeBtn:s,WkEndNode:E,WkConditionSet:U,WkNodeSet:Q},mixins:[K],props:{props:{type:Object,default:function(){return{}}},sendNode:Object,list:Array},data:function(){return{editNode:null,editNodeIndex:null,conditionParent:[],conditionParentIndex:0,conditionSetVisible:!1,nodeSetVisible:!1,errorList:[],scale:1}},computed:{config:function(){return Object(Y.a)($()({},J),this.props||{})}},watch:{},created:function(){},mounted:function(){},beforeDestroy:function(){},methods:{nodeClick:function(e){var t=e.node,i=e.index,n=e.conditionParent;this.editNode=t,t.examineType>0?this.nodeSetVisible=!0:(this.conditionParent=n,this.conditionParentIndex=i,this.conditionSetVisible=!0)},scaleClick:function(e){"minus"===e?this.scale=this.scale-.1:"plus"===e&&(this.scale=this.scale+.1)},getParams:function(){this.errorList=[];var e=[];return this.getListParams(this.list,e),this.errorList.length>0?{isError:!0,list:this.errorList}:{isError:!1,list:e}},getListParams:function(e,t){var i=this;e.forEach(function(e){0===e.examineType?t.push(i.getConditonWrapParams(e)):t.push(i.getNodeParams(e))})},getNodeParams:function(e){e.isError=this.getWkNodeErrorStatus(e),e.isError&&this.errorList.push(e);var t={examineType:e.examineType,name:e.name,deptList:e.deptList,examineErrorHandling:e.examineErrorHandling,roleId:e.roleId,type:e.type,userList:e.userList.map(function(e){return e.userId}),chooseType:e.chooseType,rangeType:e.rangeType};return 5===e.examineType?1===e.type?t.parentLevel=1===e.overType?e.parentLevel:0:2===e.type&&(t.parentLevel=e.tempParentLevel):t.parentLevel=e.parentLevel,t},getConditionNodeParams:function(e,t){e.isError=!1,e.isError&&this.errorList.push(e);var i={conditionName:e.conditionName,sort:t+1,conditionDataList:[]};return e.conditionDataList.forEach(function(e){var t={name:e.name,fieldName:e.fieldName,type:e.type,fieldId:e.fieldId,conditionType:e.conditionType};3===e.type||9===e.type?t.values=e.values:6===e.conditionType?t.values=[e.leftValue,e.leftCondition,e.rightCondition,e.rightValue]:8===e.conditionType?t.values=e.values:t.values=[e.values],i.conditionDataList.push(t)}),i},getConditonWrapParams:function(e){var t=this,i={examineType:e.examineType,name:e.name,conditionList:[]};return e.conditionList.forEach(function(e,n){var o=t.getConditionNodeParams(e,n);o.examineDataList=[],i.conditionList.push(o),t.getListParams(e.examineDataList,o.examineDataList)}),i}}},X=(i("9E5Y"),Object(o.a)(M,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"wk-approve-flow-wrap"},[i("el-button-group",[i("el-button",{attrs:{disabled:e.scale<=.5,icon:"el-icon-minus"},on:{click:function(t){e.scaleClick("minus")}}}),e._v(" "),i("el-button",{attrs:{disabled:e.scale>3,icon:"el-icon-plus"},on:{click:function(t){e.scaleClick("plus")}}})],1),e._v(" "),i("div",{staticClass:"wk-approve-flow",style:{transform:"scale("+e.scale+")"}},[e.sendNode?i("wk-node",{attrs:{"visible-arrow":!1,node:e.sendNode,parent:e.list,disabled:"","header-color":"#15388b"}}):e._e(),e._v(" "),e._l(e.list,function(t,n){return[0===t.examineType?i("wk-condition-wrap",{key:n,attrs:{index:n,node:t,parent:e.list},on:{"node-click":e.nodeClick}}):i("wk-node",{key:n,attrs:{index:n,parent:e.list,node:t},on:{"node-click":e.nodeClick}})]}),e._v(" "),i("wk-end-node"),e._v(" "),i("wk-condition-set",{attrs:{visible:e.conditionSetVisible,node:e.editNode,"condition-parent":e.conditionParent,"condition-parent-index":e.conditionParentIndex,props:e.config},on:{"update:visible":function(t){e.conditionSetVisible=t}}}),e._v(" "),i("wk-node-set",{attrs:{visible:e.nodeSetVisible,node:e.editNode,props:e.config},on:{"update:visible":function(t){e.nodeSetVisible=t}}})],2)],1)},[],!1,null,null,null));X.options.__file="WkApproveFlow.vue";var ee=X.exports;i.d(t,!1,function(){return s}),i.d(t,!1,function(){return k}),i.d(t,!1,function(){return T}),i.d(t,!1,function(){return E}),i.d(t,!1,function(){return N}),i.d(t,"a",function(){return ee}),i.d(t,!1,function(){return U}),i.d(t,"b",function(){return l}),i.d(t,!1,function(){return r}),i.d(t,!1,function(){return c})},Sh3n:function(e,t,i){"use strict";var n=i("Ew4w");i.n(n).a},WeR8:function(e,t,i){"use strict";var n=i("PhsT");i.n(n).a},ZGVA:function(e,t,i){},d3Hm:function(e,t,i){"use strict";var n=i("qLPV");i.n(n).a},h0UK:function(e,t,i){e.exports={xrColorPrimary:"#2362FB"}},k1Uw:function(e,t,i){"use strict";var n=i("rIyx");i.n(n).a},lPTY:function(e,t,i){},msoO:function(e,t,i){e.exports={xrColorPrimary:"#2362FB"}},qLPV:function(e,t,i){},rIyx:function(e,t,i){e.exports={xrColorPrimary:"#2362FB"}},rToW:function(e,t,i){"use strict";var n=i("t+cZ");i.n(n).a},"t+cZ":function(e,t,i){},uy8d:function(e,t,i){},xcIE:function(e,t,i){}}]);