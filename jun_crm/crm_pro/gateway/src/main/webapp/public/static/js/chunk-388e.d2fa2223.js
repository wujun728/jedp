(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-388e"],{"/9A1":function(e,t,a){"use strict";var s=a("VXrd");a.n(s).a},"9GgJ":function(e,t,a){"use strict";var s={name:"XrHeader",components:{},props:{iconClass:[String,Array],iconColor:String,label:String,showSearch:{type:Boolean,default:!1},searchIconType:{type:String,default:"text"},placeholder:{type:String,default:"请输入内容"},ftTop:{type:String,default:"15px"},content:[String,Number],inputAttr:{type:Object,default:function(){}}},data:function(){return{search:""}},computed:{},watch:{content:{handler:function(){this.search!=this.content&&(this.search=this.content)},immediate:!0}},mounted:function(){},beforeDestroy:function(){},methods:{inputChange:function(){this.$emit("update:content",this.search)},searchClick:function(){this.$emit("search",this.search)}}},i=(a("zIzm"),a("KHd+")),n=Object(i.a)(s,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("flexbox",{staticClass:"xr-header"},[e.iconClass?a("div",{staticClass:"xr-header__icon",style:{backgroundColor:e.iconColor}},[a("i",{class:e.iconClass})]):e._e(),e._v(" "),a("div",{staticClass:"xr-header__label"},[e.$slots.label?e._t("label"):[e._v(e._s(e.label))]],2),e._v(" "),e.showSearch?a("el-input",e._b({staticClass:"xr-header__search",class:{"is-text":"text"===e.searchIconType},style:{"margin-top":e.ftTop},attrs:{placeholder:e.placeholder},on:{input:e.inputChange},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.searchClick(t):null}},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}},"el-input",e.inputAttr,!1),["text"===e.searchIconType?a("el-button",{attrs:{slot:"append",type:"primary"},nativeOn:{click:function(t){return e.searchClick(t)}},slot:"append"},[e._v("搜索")]):a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},nativeOn:{click:function(t){return e.searchClick(t)}},slot:"append"})],1):e._e(),e._v(" "),a("div",{staticClass:"xr-header__ft",style:{top:e.ftTop}},[e._t("ft")],2)],1)},[],!1,null,"7bba770c",null);n.options.__file="index.vue";t.a=n.exports},SdT7:function(e,t,a){"use strict";var s=a("qf+x");a.n(s).a},VXrd:function(e,t,a){e.exports={xrColorPrimary:"#2362FB"}},YSp2:function(e,t,a){"use strict";a.d(t,"i",function(){return r}),a.d(t,"j",function(){return l}),a.d(t,"k",function(){return u}),a.d(t,"n",function(){return o}),a.d(t,"m",function(){return c}),a.d(t,"l",function(){return p}),a.d(t,"a",function(){return d}),a.d(t,"b",function(){return h}),a.d(t,"c",function(){return f}),a.d(t,"g",function(){return m}),a.d(t,"h",function(){return v}),a.d(t,"f",function(){return V}),a.d(t,"r",function(){return b}),a.d(t,"q",function(){return g}),a.d(t,"p",function(){return y}),a.d(t,"o",function(){return _}),a.d(t,"e",function(){return D}),a.d(t,"d",function(){return O});var s=a("GQeE"),i=a.n(s),n=a("t3Un");function r(e){return Object(n.a)({url:"adminDept/deleteDept/"+e.id,method:"post"})}function l(e){return Object(n.a)({url:"adminDept/setDept",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function u(e){return Object(n.a)({url:"adminDept/addDept",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function o(e){return Object(n.a)({url:"adminUser/setUser",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function c(e){return Object(n.a)({url:"adminUser/addUser",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function p(e){return Object(n.a)({url:"adminRole/getAllRoleList",method:"post",data:e})}function d(e){return Object(n.a)({url:"adminRole/getRoleList",method:"post",data:e})}function h(e){return Object(n.a)({url:"adminRole/queryAuthRole/"+e,method:"post"})}function f(e,t){return Object(n.a)({url:"adminRole/updateAuthRole/"+e,method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function m(e){return Object(n.a)({url:"adminUser/resetPassword",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function v(e){return Object(n.a)({url:"adminUser/usernameEdit",method:"post",data:e})}function V(e){return Object(n.a)({url:"adminUser/usernameEditByManager",method:"post",data:e})}function b(e){return Object(n.a)({url:"adminUser/setUserStatus",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}var g="https://www.72crm.com/npm/static/user_import.xlsx";function y(e){var t=new FormData;return i()(e).forEach(function(a){t.append(a,e[a])}),Object(n.a)({url:"adminUser/excelImport",method:"post",data:t,headers:{"Content-Type":"multipart/form-data"},timeout:6e4})}function _(e){return Object(n.a)({url:"adminUser/downExcel",method:"post",data:e,responseType:"blob"})}function D(e){return Object(n.a)({url:"adminUser/setUserDept",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function O(){return Object(n.a)({url:"adminUser/countNumOfUser",method:"post"})}},ihDC:function(e,t,a){},jPAu:function(e,t,a){"use strict";var s=a("QbLZ"),i=a.n(s),n=a("KTTK"),r=a("82NB"),l=a("b5rP"),u=a("7AXb"),o=a("0BDH"),c=a.n(o),p=a("gSIQ"),d=a("7Qib"),h={name:"WkUserDepSelect",components:{WkSelectDropdown:r.a,WkDep:l.a,WkUser:u.a},mixins:[c.a],props:{radio:Boolean,max:{type:Number,default:2},depProps:{type:Object,default:function(){return{}}},userProps:{type:Object,default:function(){return{}}},placeholder:{type:String,default:function(){return"请选择"}},depValue:{required:!0},userValue:{required:!0},depOptions:Array,userOptions:Array,disabled:{type:Boolean,default:!1},popperAppendToBody:{type:Boolean,default:!0}},data:function(){return{visible:!1,tabType:"user",depDataValue:[],userDataValue:[],depPropsValue:{value:"id",label:"name",request:null,params:null},userPropsValue:{value:"userId",label:"realname",request:null,params:null},loading:!1,depOptionsList:[],userOptionsList:[]}},computed:{showUserSelects:function(){return this.userSelects&&this.userSelects.length>this.max?this.userSelects.slice(0,this.max):this.userSelects},showDepSelects:function(){var e=0;return(this.userSelects&&this.userSelects.length<this.max||!this.userSelects)&&(e=this.max-this.userSelects.length),e>0&&this.depSelects?this.depSelects.slice(0,this.max):[]},depSelects:function(){return this.depOptionsList.length?this.getSelectList():[]},userSelects:function(){var e=this;return this.userOptionsList.length?this.userOptionsList.filter(function(t){return e.userDataValue.includes(t[e.userPropsValue.value])}):[]}},watch:{visible:function(e){e?this.broadcast("WkSelectDropdown","updatePopper"):this.broadcast("WkSelectDropdown","destroyPopper"),this.$emit("visible-change",e)},depValue:function(){this.depVerifyValue()},depOptions:{handler:function(){this.depOptions&&(this.depOptionsList=this.depOptions)},immediate:!0},depDataValue:function(e,t){Object(p.valueEquals)(e,t)||(this.radio?this.$emit("update:depValue",this.depDataValue&&this.depDataValue.length?this.depDataValue[0]:""):this.$emit("update:depValue",this.depDataValue))},userValue:function(){this.userVerifyValue()},userOptions:{handler:function(){this.userOptions&&(this.userOptionsList=this.userOptions)},immediate:!0},userDataValue:function(){this.radio?this.$emit("update:userValue",this.userDataValue&&this.userDataValue.length?this.userDataValue[0]:""):this.$emit("update:userValue",this.userDataValue)},depProps:{handler:function(e){var t={value:"id",label:"name",request:null,params:null};this.depPropsValue=e?i()({},t,e):t,this.depVerifyOptions()},immediate:!0},userProps:{handler:function(e){var t={value:"userId",label:"realname",request:null,params:null};this.userPropsValue=e?i()({},t,e):t,this.userVerifyOptions()},immediate:!0}},mounted:function(){this.depVerifyValue(),this.userVerifyValue()},methods:{getSelectList:function(){var e=[];return this.recursionOptions(this.depOptionsList,this.depDataValue,e),e},recursionOptions:function(e,t,a){var s=this;e.forEach(function(e){t.includes(e[s.depPropsValue.value])&&a.push(e),e.children&&s.recursionOptions(e.children,t,a)})},depVerifyValue:function(){var e=this;(this.radio||Array.isArray(this.depValue)||this.$emit("update:depValue",[]),this.radio&&(Array.isArray(this.depValue)||null===this.depValue||void 0===this.depValue)&&this.$emit("update:depValue",""),this.radio)?this.depValue!==this.depDataValue&&(this.depValue?this.depDataValue=[parseInt(this.depValue)]:this.depDataValue=[]):Object(p.valueEquals)(this.depValue,this.depDataValue)||(this.depValue&&this.depValue.length?this.depValue[0][this.depPropsValue.value]?this.depDataValue=this.depValue.map(function(t){return t[e.depPropsValue.value]}):this.depDataValue=Object(d.t)(this.depValue):this.depDataValue=[])},depVerifyOptions:function(){this.depOptions?this.depOptionsList=this.depOptions:this.requestDepList()},requestDepList:function(){var e=this;this.loading=!0;var t=n.k;this.depPropsValue.request&&(t=this.depPropsValue.request);var a={type:"tree"};this.depPropsValue.params&&(a=this.depPropsValue.params),t(a).then(function(t){e.depOptionsList=t.data||[],e.loading=!1}).catch(function(){e.loading=!1})},handleClose:function(){this.visible=!1},handleMenuEnter:function(){},doDestroy:function(){this.$refs.popper&&this.$refs.popper.doDestroy()},deleteDep:function(e){if(!this.disabled){var t=Object(d.t)(this.depDataValue);t.splice(e,1),this.depDataValue=t,this.wkDepChange()}},focusClick:function(){this.$emit("focus")},wkDepChange:function(){var e=this;this.$nextTick(function(){e.radio?e.dispatch("ElFormItem","el.form.change",e.depDataValue&&e.depDataValue.length?e.depDataValue[0]:""):e.dispatch("ElFormItem","el.form.change",e.depDataValue),e.$emit("change",e.userDataValue,e.depDataValue,e.userSelects,e.depSelects,"dep")})},containerClick:function(){this.disabled||(this.visible=!this.visible)},userVerifyValue:function(){var e=this;(this.radio||Array.isArray(this.userValue)||this.$emit("update:userValue",[]),this.radio&&(Array.isArray(this.userValue)||null===this.userValue||void 0===this.userValue)&&this.$emit("update:userValue",""),this.radio)?this.userValue!==this.userDataValue&&(this.userValue?this.userDataValue=[parseInt(this.userValue)]:this.userDataValue=[]):Object(p.valueEquals)(this.userValue,this.userDataValue)||(this.userValue&&this.userValue.length?this.userValue[0][this.userPropsValue.value]?this.userDataValue=this.userValue.map(function(t){return t[e.userPropsValue.value]}):this.userDataValue=Object(d.t)(this.userValue):this.userDataValue=[])},userVerifyOptions:function(){this.userOptions?this.userOptionsList=this.userOptions:this.requestUserList()},requestUserList:function(){var e=this;this.loading=!0;var t=n.u,a={pageType:0};this.userPropsValue.request&&(t=this.userPropsValue.request),this.userPropsValue.params&&(a=this.userPropsValue.params),t(a).then(function(t){e.userOptionsList=t.data.hasOwnProperty("list")?t.data.list||[]:t.data||[],e.loading=!1}).catch(function(){e.loading=!1})},deleteuser:function(e){this.disabled||(this.userDataValue.splice(e,1),this.wkUserChange())},wkUserChange:function(){var e=this;this.$nextTick(function(){e.radio?e.dispatch("ElFormItem","el.form.change",e.userDataValue&&e.userDataValue.length?e.userDataValue[0]:""):e.dispatch("ElFormItem","el.form.change",e.userDataValue)}),this.$emit("change",this.userDataValue,this.depDataValue,this.userSelects,this.depSelects,"user")},getTooltipText:function(){var e=this,t=(this.depSelects||[]).map(function(t){return t[e.depPropsValue.label]}).join("、"),a=(this.userSelects||[]).map(function(t){return t[e.userPropsValue.label]}).join("、");return t&&a&&(t+="、"),t+a}}},f=(a("SdT7"),a("KHd+")),m=Object(f.a)(h,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"elclickoutside",rawName:"v-elclickoutside",value:e.handleClose,expression:"handleClose"}],ref:"reference",staticClass:"wk-user-dep-select xh-form-border",class:[e.disabled?"is_disabled":"is_valid",{is_focus:e.visible}],attrs:{wrap:"wrap"},on:{click:e.containerClick}},[a("div",{staticClass:"el-select__tags"},[e._l(e.showUserSelects,function(t,s){return a("span",{key:"user"+s,staticClass:"user-item text-one-line"},[e._v(e._s(t[e.userPropsValue.label])+"\n      "),a("i",{staticClass:"delete-icon el-icon-close",on:{click:function(t){t.stopPropagation(),e.deleteuser(s)}}})])}),e._v(" "),e._l(e.showDepSelects,function(t,s){return a("span",{key:"dep"+s,staticClass:"user-item text-one-line"},[e._v(e._s(t[e.depPropsValue.label])+"\n      "),a("i",{staticClass:"delete-icon el-icon-close",on:{click:function(t){t.stopPropagation(),e.deleteDep(s)}}})])})],2),e._v(" "),e.depSelects.length+e.userSelects.length>e.max?a("el-tooltip",{attrs:{content:e.getTooltipText(),effect:"dark",placement:"top"}},[a("i",{staticClass:"el-icon-more"})]):e._e(),e._v(" "),a("i",{class:["el-icon-arrow-up",{"is-reverse":e.visible}]}),e._v(" "),e.depSelects.length+e.userSelects.length==0?a("div",{staticClass:"user-placeholder text-one-line"},[e._v(e._s(e.placeholder))]):e._e(),e._v(" "),a("transition",{attrs:{name:"el-zoom-in-top"},on:{"before-enter":e.handleMenuEnter,"after-leave":e.doDestroy}},[a("wk-select-dropdown",{directives:[{name:"show",rawName:"v-show",value:e.visible&&!e.disabled,expression:"visible && !disabled"}],ref:"popper",attrs:{"append-to-body":e.popperAppendToBody}},[a("el-scrollbar",{ref:"scrollbar",attrs:{tag:"div"}},[a("el-tabs",{model:{value:e.tabType,callback:function(t){e.tabType=t},expression:"tabType"}},[a("el-tab-pane",{attrs:{label:"员工",name:"user"}},[a("wk-user",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"header-show":!1,disabled:e.disabled,options:e.userOptionsList,props:e.userPropsValue,radio:e.radio},on:{change:e.wkUserChange,close:function(t){e.visible=!1}},model:{value:e.userDataValue,callback:function(t){e.userDataValue=t},expression:"userDataValue"}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"部门",name:"dep"}},[a("wk-dep",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"header-show":!1,options:e.depOptionsList,props:e.depPropsValue,radio:e.radio,disabled:e.disabled},on:{change:e.wkDepChange,close:function(t){e.visible=!1}},model:{value:e.depDataValue,callback:function(t){e.depDataValue=t},expression:"depDataValue"}})],1)],1)],1)],1)],1)],1)},[],!1,null,"630c0da2",null);m.options.__file="index.vue";t.a=m.exports},kufG:function(e,t,a){},lNRB:function(e,t,a){"use strict";var s=a("QbLZ"),i=a.n(s),n=a("YSp2"),r=a("KTTK"),l=a("gSIQ"),u=a("oxiq"),o=a.n(u),c=a("jtZb"),p={onlyShowRole:!1,roleRequest:null},d={name:"RoleEmployeeSelect",components:{},props:{props:{type:Object,default:function(){return{}}},value:[Array,Number,String]},data:function(){return{selectValue:[],activeName:"",roleOption:[],userOption:[],searchInput:""}},computed:{config:function(){return Object(c.a)(i()({},p),this.props||{})},select:function(){return this.$refs.select}},watch:{value:{handler:function(){Object(l.valueEquals)(this.value,this.selectValue)||(this.selectValue=this.value)},immediate:!0}},created:function(){this.getRoleList(),this.getUserList()},mounted:function(){},beforeDestroy:function(){},methods:{selectVisibleChange:function(e){""!==this.activeName&&"0"!==this.activeName||(this.activeName="role")},getRoleList:function(){var e=this;(this.config.roleRequest||n.l)().then(function(t){e.roleOption=t.data||[]}).catch(function(){})},getUserList:function(){var e=this;Object(r.u)({pageType:0}).then(function(t){e.userOption=t.data.list||[]}).catch(function(){})},selectChange:function(){this.$emit("input",this.selectValue)},userSearch:function(){var e=this;this.userOption.forEach(function(t){t.isHide=!o.a.match(t.realname,e.searchInput)})}}},h=(a("/9A1"),a("mJFP"),a("KHd+")),f=Object(h.a)(d,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-select",e._g(e._b({ref:"select",staticClass:"role-employee-select",on:{"visible-change":e.selectVisibleChange,change:e.selectChange},model:{value:e.selectValue,callback:function(t){e.selectValue=t},expression:"selectValue"}},"el-select",e.$attrs,!1),e.$listeners),[a("div",{staticClass:"role-employee-select__body"},[a("el-tabs",{ref:"roleTabs",class:{"el-tabs__header--hidden":e.config.onlyShowRole},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{ref:"roleTabPane",attrs:{label:"自选角色",name:"role"}},e._l(e.roleOption,function(t){return a("div",{key:t.pid,attrs:{label:t.name}},[a("div",{staticClass:"role-employee-select__title"},[e._v(e._s(t.name))]),e._v(" "),e._l(t.list,function(e){return a("el-option",{key:e.roleId,staticStyle:{padding:"0 10px"},attrs:{label:e.roleName,value:e.roleId}})})],2)})),e._v(" "),a("el-tab-pane",{attrs:{label:"按员工复制角色",name:"employee"}},[a("el-input",{staticClass:"search-input",attrs:{placeholder:"搜索成员",size:"small","prefix-icon":"el-icon-search"},on:{input:e.userSearch},model:{value:e.searchInput,callback:function(t){e.searchInput=t},expression:"searchInput"}}),e._v(" "),e._l(e.userOption,function(t){return a("el-option",{directives:[{name:"show",rawName:"v-show",value:!t.isHide,expression:"!item.isHide"}],key:t.userId,staticStyle:{padding:"0 10px"},attrs:{label:t.realname,value:t.userId+"@"+t.roleId}},[a("flexbox",{staticClass:"cell"},[a("xr-avatar",{staticClass:"cell__img",attrs:{name:t.realname,size:24,src:t.img}}),e._v(" "),a("div",{staticClass:"cell__body"},[e._v(e._s(t.realname))]),e._v(" "),a("el-tooltip",{attrs:{content:t.roleName,effect:"dark",placement:"top"}},[a("div",{staticClass:"cell__footer text-one-line"},[e._v(e._s(t.roleName))])])],1)],1)})],2)],1)],1)])},[],!1,null,"22b1a213",null);f.options.__file="RoleEmployeeSelect.vue";t.a=f.exports},mJFP:function(e,t,a){"use strict";var s=a("kufG");a.n(s).a},"qf+x":function(e,t,a){},zIzm:function(e,t,a){"use strict";var s=a("ihDC");a.n(s).a}}]);