function c(t){if(b[t])return b[t].exports;var e=b[t]={i:t,l:!1,exports:{}};return a[t].call(e.exports,e,e.exports,c),e.l=!0,e.exports}var a,b;b={},c.m=a=[function(t,e,i){"use strict";function n(t,e,i,n,s,a,o,r){var l,c="function"==typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=i,c._compiled=!0),n&&(c.functional=!0),a&&(c._scopeId="data-v-"+a),o?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),s&&s.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},c._ssrRegister=l):s&&(l=r?function(){s.call(this,this.$root.$options.shadowRoot)}:s),l)if(c.functional){c._injectStyles=l;var d=c.render;c.render=function(t,e){return l.call(e),d(t,e)}}else{var u=c.beforeCreate;c.beforeCreate=u?[].concat(u,l):[l]}return{exports:t,options:c}}i.d(e,"a",function(){return n})},function(t,e,i){"use strict";e.a={name:"minder",props:["value","readonly"],data:function(){return{isLoaded:!1,key:"t-minder"}},created:function(){Vue.options.components[this.key]&&(this.isLoaded=!0)},render:function(t){var e=t;return this.isLoaded?e("t-minder",{attrs:{value:this.value,readonly:this.readonly},on:{input:this.save}}):(this.load(),null)},methods:{save:function(t){$.emit("docContentUpdate",t)},load:function(){var t=this;$.lib(["naotu.js"],function(){t.isLoaded=!0})}}}},,,function(t,e,i){"use strict";i.r(e);function n(){var e=this,t=e.$createElement,i=e._self._c||t;return e.isInit?i("z-row",{attrs:{gutter:20}},e._l(e.data,function(t){return i("Quadrant",{key:t.tag,attrs:{height:e.height,data:t,now:e.now}})}),1):e._e()}function s(){var e=this,t=e.$createElement,i=e._self._c||t;return i("z-col",{class:e.data.tag,attrs:{span:12}},[i("Title",{attrs:{quadrant:e.data.tag,name:e.data.title},on:{finish:e.unshift}}),e._v(" "),i("z-scrollbar",{staticClass:"block",attrs:{height:e.height,"data-id":e.data.tag}},[i("z-draggable",{attrs:{list:e.data.sons,group:"things"},on:{add:e.add,end:e.end}},e._l(e.data.sons,function(t){return i("Thing",{key:t._id,attrs:{data:t,now:e.now}})}),1),e._v(" "),e.data.sons&&0!==e.data.sons.length?e._e():i("div",{staticClass:"empty"},[e._v("\u606d\u559c\u4f60\uff01\u5df2\u5b8c\u6210\u4e86\u6240\u6709\u5f85\u529e")])],1)],1)}function a(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"header z-row"},[i("div",{staticClass:"z-col"},[i("i",{staticClass:"ft icon flag"},[e._v("\ue753")]),e._v(e._s(e.name)+"\n    ")]),e._v(" "),i("div",{staticClass:"z-1",class:{active:e.active}},[i("label",{on:{click:function(t){return e.show(1)}}},[i("z-input",{attrs:{type:"text",maxlength:"200",width:"100%",placeholder:"\u8bf7\u5728\u8fd9\u91cc\u8f93\u5165\u9700\u8981\u5904\u7406\u7684\u4e8b\u9879"},nativeOn:{keyup:function(t){return e.keyup(t)}},model:{value:e.text,callback:function(t){e.text=t},expression:"text"}})],1),e._v(" "),i("i",{staticClass:"ft icon close",on:{click:function(t){return e.show(0)}}})])])}a._withStripped=s._withStripped=n._withStripped=!0;var o={props:["quadrant","name","todoList"],data:function(){return{text:"",isBlur:!0,active:!1}},methods:{hide:function(){this.active=!1},show:function(t){this.active=0!==t||!this.active,this.active&&this.$nextTick(function(){this.$el.querySelector("input").focus()})},keyup:function(t){t.stopPropagation(),t.preventDefault();var e=t.keyCode;if(27===e)return this.hide();if(13===e){var n={},i=this.text;i&&(n.title=i,n.quadrant=this.quadrant,$.post(n,"/thing/put.do",function(t){var e=t.data;n._id=e._id;var i=e.status;n.status=parseInt(i),this.$emit("finish",n),this.text=""},this))}}}},r=i(0),l=Object(r.a)(o,a,[],!1,null,null,null);l.options.__file="todo/title.vue";function c(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"show",rawName:"v-show",value:2!==e.data.status,expression:"data.status !== 2"}],staticClass:"k-thing",class:{finish:e.data.status},attrs:{"data-id":e.data._id},on:{dblclick:e.dblclick,click:e.detail}},[i("label",{attrs:{"data-id":e.data._id},on:{click:function(t){return t.stopPropagation(),e.doFinish(t)}}},[i("i",{staticClass:"ft icon"})]),e._v(" "),i("div",[e.overtime?i("i",{staticClass:"ft bold red"},[e._v("!")]):e._e(),e._v(e._s(e.data.title))])])}var d=l.exports;c._withStripped=!0;var u={props:["data","now"],computed:{current:function(){if(this.now)return this.now;var t=new Date;return parseInt(t.getTime()/1e3)},overtime:function(){var t=this.data;return 0===t.status&&t.end&&t.end<this.current}},methods:{doFinish:function(t){var i,e="finish",n=this.data,s=n._id,a=zen.user.uid,o=$(t.currentTarget).parent();if(a!==n.owner)return $.notice("\u53ea\u6709\u8d1f\u8d23\u4eba\u624d\u80fd\u70b9\u51fb\u5b8c\u6210","error");i=o.hasClass(e)?(o.removeClass(e),0):(o.addClass(e),1);var r={_id:s,status:i,projectId:n.projectId};$.post(r,"/thing/patch.do",function(){n.status=i;var t=this.$parent;t.sort&&t.sort(s,i);var e=i?"\u5b8c\u6210\u4e86\u4efb\u52a1":"\u53d6\u6d88\u4e86\u5b8c\u6210";$.post({thingId:s,content:e},"/put/thingLog.json",function(t){})},this)},detail:function(){$.emit("thingDetail",this.data._id)},dblclick:function(t){t.preventDefault(),t.stopPropagation()}}},h=Object(r.a)(u,c,[],!1,null,null,null);h.options.__file="todo/thing.vue";var v=h.exports,p=function(t,e,i){for(var n=null,s=0;s<i.length;s++)if(i[s]._id===t){n=i.splice(s,1);break}if(null!=n){if(n=n[0],0===e)return i.unshift(n);for(var a=i.length-1;0<=a;a--)if(0===i[a].status)return void i.splice(a+1,0,n);i.unshift(n)}},f={props:["data","now","height"],components:{Title:d,Thing:v},data:function(){return{currentId:""}},methods:{add:function(t){t.pullMode&&this.drag(t)},end:function(t){t.pullMode||t.newIndex===t.oldIndex||this.drag(t)},drag:function(t){var e=t.newIndex,i={_id:this.data.sons[e]._id,quadrant:this.data.tag};if(0===e)if(1===this.data.sons.length)i.order=1e5;else{var n=this.data.sons[e+1];i.order=n.order-500}else if(e===this.data.length){var s=this.data.sons[e-1];i.order=s.order+500}else{var a=this.data.sons[e+1],o=this.data.sons[e-1];i.order=parseInt((a.order+o.order)/2)}$.post(i,"/thing/patch.do",function(t){},this)},unshift:function(t){this.data.sons.unshift(t)},sort:function(t,e){p(t,e,this.data.sons)}}},m=Object(r.a)(f,s,[],!1,null,null,null);m.options.__file="todo/quadrant.vue";var _={props:["things"],data:function(){return{data:[{tag:"a",title:"\u91cd\u8981\u4e14\u7d27\u6025",sons:[]},{tag:"b",title:"\u91cd\u8981\u4e0d\u7d27\u6025",sons:[]},{tag:"c",title:"\u7d27\u6025\u4e0d\u91cd\u8981",sons:[]},{tag:"d",title:"\u4e0d\u91cd\u8981\u4e0d\u7d27\u6025",sons:[]}],now:0,height:200,isInit:!1}},components:{Quadrant:m.exports},created:function(){var t=new Date;if(this.now=parseInt(t.getTime()/1e3),this.resize(),$.on("thingUpdate",this.thingChange),window.addEventListener("resize",this.resize),this.things&&0!==this.things.length)for(var e,i,n=0,s=this.things;n<s.length;n++)e=s[n],(i=this.getQuadrant(e.quadrant))&&i.sons.push(e)},destroyed:function(){$.off("thingUpdate"),window.removeEventListener("resize",this.resize)},methods:{thingChange:function(t,e){var i=this.getQuadrant(t.quadrant);if(i){var n=i.sons;if("add"===e)return n.unshift(t);for(var s=0;s<n.length;s++)if(n[s]._id===t._id)return void("remove"===e?n.splice(s,1):n[s][e]=t[e])}},resize:function(){var t=parseInt(($("body").height()-180)/2);t>this.height&&(this.height=t),this.isInit=!0},getQuadrant:function(t){for(var e,i=0;i<4;i++)if((e=this.data[i]).tag===t)return e;return null}}},g=Object(r.a)(_,n,[],!1,null,null,null);g.options.__file="todo/index.vue";function w(){var e=this,t=e.$createElement,i=e._self._c||t;return e.isShow&&e.item?i("z-dialog",{staticClass:"k-thing-detail-bg",attrs:{top:"5vh",width:"800px",visible:""},on:{close:e.close}},[i("z-row",{attrs:{gutter:18}},[i("z-col",{attrs:{span:20}},[i("Header",{attrs:{type:e.type},model:{value:e.item,callback:function(t){e.item=t},expression:"item"}}),e._v(" "),i("Describe",{attrs:{type:e.type},model:{value:e.item,callback:function(t){e.item=t},expression:"item"}}),e._v(" "),i("div",{staticClass:"infos"},[e.item.end?i("dl",{staticClass:"z-left"},[i("dt",[i("i",{staticClass:"ft icon h1"},[e._v("\ue706")]),e._v("\u8ba1\u5212\u5b8c\u6210\u65f6\u95f4\uff1a\n                    ")]),e._v(" "),i("dd",[i("z-idate",{attrs:{value:e.item.end}})],1)]):e._e(),e._v(" "),i("Owner"),e._v(" "),i("Watcher"),e._v(" "),i("Priority"),e._v(" "),i("Clock")],1),e._v(" "),i("Attach"),e._v(" "),i("SubTodo",{model:{value:e.item,callback:function(t){e.item=t},expression:"item"}}),e._v(" "),i("Comment")],1),e._v(" "),i("z-col",{attrs:{span:4}},[e.item?i("Actions"):e._e()],1)],1)],1):e._e()}function b(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"k-thing-comment"},[i("z-row",[i("z-col",{attrs:{span:1}},[i("span",{staticClass:"ft icon h1"},[e._v("\ue753")])]),e._v(" "),i("z-col",{attrs:{span:23}},[i("div",{staticClass:"title"},[i("strong",{staticClass:"ft hover",on:{click:function(t){e.isLog=!1}}},[e._v("\u8bc4\u8bba")]),e._v(" "),i("strong",{staticClass:"ft hover",class:{active:e.isLog},on:{click:function(t){e.isLog=!0}}},[e._v("\u64cd\u4f5c\u8bb0\u5f55")])])])],1),e._v(" "),i("List",{directives:[{name:"show",rawName:"v-show",value:!e.isLog,expression:"!isLog"}]}),e._v(" "),e.isLog?i("Log"):e._e()],1)}function y(){var n=this,t=n.$createElement,s=n._self._c||t;return s("div",[0===n.comments.length?s("div",{staticClass:"empty"},[s("i",{staticClass:"ft icon h1"},[n._v("\ue78f")]),n._v("\u6682\u65e0\u8bc4\u8bba\n    ")]):n._e(),n._v(" "),n._l(n.comments,function(e,i){return s("z-row",{key:e._id,staticClass:"content"},[s("z-col",{attrs:{span:2}},[s("z-avator",{staticClass:"avator",attrs:{uid:e.uid}})],1),n._v(" "),s("z-col",{attrs:{span:22}},[s("z-row",{staticClass:"info"},[s("z-col",{attrs:{span:18}},[s("z-nick",{staticClass:"nick",attrs:{uid:e.uid}}),n._v("\n                    "+n._s(n._f("idate")(e._id))+"\n                ")],1),n._v(" "),s("z-col",{attrs:{span:6}},[n.isOnwer||e.uid==e.uid?s("z-confirm",{staticClass:"ft red hover",on:{click:function(t){return n.remove(e._id,i)}}},[n._v("\u5220\u9664\n                    ")]):n._e()],1)],1),n._v("\n            "+n._s(e.content)+"\n        ")],1)],1)}),n._v(" "),s("div",{staticClass:"post"},[s("input",{directives:[{name:"model",rawName:"v-model",value:n.text,expression:"text"}],staticClass:"input",attrs:{placeholder:"\u6309\u56de\u8f66\u5065\u53d1\u9001\u8bc4\u8bba",type:"text"},domProps:{value:n.text},on:{keyup:function(t){return!t.type.indexOf("key")&&n._k(t.keyCode,"enter",13,t.key,"Enter")?null:n.submit(t)},input:function(t){t.target.composing||(n.text=t.target.value)}}})])],2)}var k=g.exports;y._withStripped=b._withStripped=w._withStripped=!0;var C={data:function(){return{comments:[],text:"",isOnwer:!1,thingId:""}},inject:["log","getThing"],mounted:function(){var t=this.getThing();this.isOnwer=t.owner===zen.user.id,this.thingId=t._id,$.post({targetId:this.thingId},"/comment/selectByParent.do",function(t){var e=t.data;e&&(this.comments=e)},this)},methods:{remove:function(t,e){$.post({_id:t,status:0},"/patch/comment.json",function(){this.comments.splice(e,1)},this)},submit:function(){var t=this.text;if(!t)return $.notice("\u8bf7\u8f93\u5165\u8bc4\u8bba\u5185\u5bb9","error");var e={targetId:this.thingId,content:t,status:1};$.post(e,"/put/comment.json",function(t){this.text="",this.comments.unshift(t.data)},this)}}},x=Object(r.a)(C,y,[],!1,null,null,null);x.options.__file="todo/detail/comment/list.vue";function z(){var e=this,t=e.$createElement,i=e._self._c||t;return i("z-list",{attrs:{url:"/select/thingLog.json?thingId="+e.thingId,size:10},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{staticClass:"log"},[i("z-nick",{staticClass:"nick",attrs:{uid:t.uid}}),e._v("\n            "+e._s(t.content)+"\n            "),i("div",{staticClass:"time"},[e._v(e._s(e._f("date")(t.addtime)))])],1)]}}])})}var S=x.exports;z._withStripped=!0;var j={inject:["getThing"],data:function(){return{thingId:null}},created:function(){var t=this.getThing();this.thingId=t._id}},T=Object(r.a)(j,z,[],!1,null,null,null);T.options.__file="todo/detail/comment/log.vue";var I={name:"detailComment",props:["value"],components:{List:S,Log:T.exports},data:function(){return{isLog:!1}}},E=Object(r.a)(I,b,[],!1,null,null,null);E.options.__file="todo/detail/comment/index.vue";function O(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"describe"},[i("z-row",[i("z-col",{attrs:{span:1}},[i("i",{staticClass:"ft icon"},[e._v("\ue75e")])]),e._v(" "),i("z-col",{attrs:{span:23}},[i("div",{staticClass:"title"},[i("strong",[e._v("\u63cf\u8ff0")])]),e._v(" "),i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.value.content,expression:"value.content"}],attrs:{placeholder:"\u6dfb\u52a0\u8be6\u7ec6\u63cf\u8ff0..."},domProps:{value:e.value.content},on:{change:e.change,input:function(t){t.target.composing||e.$set(e.value,"content",t.target.value)}}})])],1)],1)}var q=E.exports;O._withStripped=!0;var D=function(){if(3===zen.mode||4===zen.mode)return"";var t="//bridge.kooteam.com";return"daily"===zen.env&&(t="//bridge.dev.zeto.me"),t},N=function(){return 3===zen.mode||4===zen.mode?"":"//a.yimiyisu.com"},P={name:"detailDescribe",props:["value","type"],data:function(){return{thing:null,localEmit:!1}},mounted:function(){},methods:{change:function(){var t="/thing/patch.do";1===this.type&&(t="/patch/archive.json"),$.post({content:this.value.content,_id:this.value._id},t,function(t){})},init:function(){var t=D();this.editor=new Simditor({textarea:$("textarea",this.$el),placeholder:"\u8fd9\u91cc\u8f93\u5165\u5f85\u529e\u63cf\u8ff0...",defaultImage:N()+"/zeto/preview.png",params:{},tabIndent:!0,toolbar:["title","bold","italic","underline","strikethrough","fontScale","color","ol","ul","blockquote","code","table","link","image","hr","alignment"],toolbarFloat:!1,toolbarFloatOffset:0,height:"200px",toolbarHidden:!1,pasteImage:!0,cleanPaste:!0,upload:{url:t+"/upload/image.do",fileKey:"file"}}),this.editor.uploader.on("uploadsuccess",function(t,e,i){var n=JSON.parse(i);if(23===n.action)return alert(n.message);e.img.attr("src",n.data)});var e=this;void 0!==this.content&&e.editor.setValue(this.content),e.editor.on("valuechanged",function(){e.localEmit=!0,e.$parent.item.content=e.editor.getValue()})}}},L=Object(r.a)(P,O,[],!1,null,null,null);L.options.__file="todo/detail/describe.vue";function A(){var t=this,e=t.$createElement,i=t._self._c||e;return i("dl",{staticClass:"z-left"},[t._m(0),t._v(" "),i("dd",{staticClass:"k-todo-owner"},[i("z-nick",{attrs:{uid:t.thing.owner}})],1)])}var U=L.exports;A._withStripped=!0;var J={name:"detailOwner",data:function(){return{thing:null}},inject:["getThing","log"],created:function(){this.thing=this.getThing()}},W=Object(r.a)(J,A,[function(){var t=this.$createElement,e=this._self._c||t;return e("dt",[e("i",{staticClass:"ft icon h2"},[this._v("\ue903")]),this._v("\u8d1f\u8d23\u4eba\uff1a")])}],!1,null,null,null);W.options.__file="todo/detail/owner.vue";function M(){var i=this,t=i.$createElement,n=i._self._c||t;return 0<i.users.length?n("dl",{staticClass:"z-left"},[i._m(0),i._v(" "),n("dd",{staticClass:"k-todo-watcher"},i._l(i.users,function(e){return n("z-tag",{key:e._id,attrs:{size:"small",type:"warning",closable:"",effect:"plain"},on:{close:function(t){return i.remove(e._id)}}},[n("z-nick",{attrs:{uid:e.uid}})],1)}),1)]):i._e()}var Q=W.exports;M._withStripped=!0;var V={name:"detailFollw",data:function(){return{users:[],thingId:null}},inject:["getThing","log"],mounted:function(){$.on("detailWatcher",this.update)},methods:{update:function(t,e){if("new"===e)return this.users=t;if("add"===e)return this.users.push(t);if("remove"===e)for(var i,n=0;n<this.users.length;n++)if((i=this.users[n])._id===t||i.uid===t){this.users.splice(n,1);break}},remove:function(t){var e=this;return $.confirm("\u786e\u5b9a\u5220\u9664\uff1f",function(){$.post({_id:t},"/delete/thingWatcher.json",function(){e.update(t,"remove")})}),!0}}},F=Object(r.a)(V,M,[function(){var t=this.$createElement,e=this._self._c||t;return e("dt",[e("i",{staticClass:"ft icon h2"},[this._v("\ue90d")]),this._v("\u5173\u6ce8\u7684\u4eba\uff1a")])}],!1,null,null,null);F.options.__file="todo/detail/watcher.vue";function R(){var i=this,t=i.$createElement,n=i._self._c||t;return n("div",{staticClass:"k-todo-tag"},[n("label",{on:{click:i.show}},[i._v("\u5f85\u6dfb\u52a0")]),i._v(" "),i.isShow&&i.isEdit?n("div",{staticClass:"tags"},[n("input",{directives:[{name:"model",rawName:"v-model",value:i.newText,expression:"newText"}],attrs:{type:"text",placeholder:"\u8bf7\u8f93\u5165\u6807\u7b7e\u540d\u79f0"},domProps:{value:i.newText},on:{input:function(t){t.target.composing||(i.newText=t.target.value)}}}),i._v(" "),n("div",{staticClass:"tag"},i._l(i.colors,function(t,e){return n("span",{style:"background:"+t,on:{click:function(t){return i.selectColor(e)}}},[i.newColor===e?n("i",{staticClass:"ft icon"},[i._v("\ue5ca")]):i._e()])}),0),i._v(" "),n("div",{staticClass:"operator"},[n("span",{staticClass:"z-button small",on:{click:i.cancel}},[i._v("\u53d6\u6d88")]),i._v(" "),n("span",{staticClass:"z-button primary small",on:{click:i.newTag}},[i._v("\u786e\u5b9a")])])]):i._e(),i._v(" "),i.isShow&&!i.isEdit?n("div",{staticClass:"tags"},[n("div",{staticClass:"tag"},i._l(i.tags,function(t,e){return n("span",{style:"background:"+t.color,on:{click:function(t){return i.selectTag(e)}}},[i._v(i._s(t.text))])}),0),i._v(" "),n("div",{staticClass:"operator"},[n("span",{staticClass:"z-button small",on:{click:i.editModal}},[i._v("\u65b0\u589e")]),i._v(" "),n("span",{staticClass:"z-button small",on:{click:i.close}},[i._v("\u53d6\u6d88")]),i._v(" "),n("span",{staticClass:"z-button small primary",on:{click:i.addTag}},[i._v("\u786e\u5b9a")])])]):i._e()])}var B=F.exports;R._withStripped=!0;var H=["#56baff","#d6337d","#62B0FF","#cf0606","#ff7a7a","#764df8","#6bc859","#9a7aff","#388bdd","#ffca65","#e17aff","#7B8F18"],G={name:"detailTag",props:["value"],data:function(){return{isShow:!1,isEdit:!1,newText:"",newColor:0,selected:[],tags:[],colors:[]}},created:function(){this.colors=H},methods:{close:function(){this.isShow=!1},addTag:function(){},newTag:function(){if(!this.newText)return alert("\u6807\u7b7e\u540d\u4e0d\u80fd\u4e3a\u7a7a");var t={text:this.newText,color:this.colors[this.newColor]};this.tags.push(t),this.newText="",this.cancel()},cancel:function(){this.isEdit=!1},editModal:function(){this.isEdit=!0},selectTag:function(t){},show:function(){this.isShow=!0,0===this.tags.length&&(this.isEdit=!0)},selectColor:function(t){this.newColor=t}}},K=Object(r.a)(G,R,[],!1,null,null,null);K.options.__file="todo/detail/tag.vue";function X(){var t=this,e=t.$createElement,i=t._self._c||e;return i("dl",{staticClass:"z-left"},[t._m(0),t._v(" "),i("dd",[i("label",{directives:[{name:"show",rawName:"v-show",value:"a"===t.thing.quadrant,expression:"thing.quadrant === 'a'"}],staticClass:"k-prority a"},[t._v("\u91cd\u8981\u4e14\u7d27\u6025")]),t._v(" "),i("label",{directives:[{name:"show",rawName:"v-show",value:"b"===t.thing.quadrant,expression:"thing.quadrant === 'b'"}],staticClass:"k-prority b"},[t._v("\u91cd\u8981\u4e0d\u7d27\u6025")]),t._v(" "),i("label",{directives:[{name:"show",rawName:"v-show",value:"c"===t.thing.quadrant,expression:"thing.quadrant === 'c'"}],staticClass:"k-prority c"},[t._v("\u7d27\u6025\u4e0d\u91cd\u8981")]),t._v(" "),i("label",{directives:[{name:"show",rawName:"v-show",value:"d"===t.thing.quadrant,expression:"thing.quadrant === 'd'"}],staticClass:"k-prority d"},[t._v("\u4e0d\u91cd\u8981\u4e0d\u7d27\u6025")])])])}var Y=K.exports;X._withStripped=!0;var Z={inject:["getThing"],data:function(){return{thing:{}}},mounted:function(){this.thing=this.getThing()}},tt=Object(r.a)(Z,X,[function(){var t=this.$createElement,e=this._self._c||t;return e("dt",[e("i",{staticClass:"ft icon h1"},[this._v("\ue725")]),this._v("\u4f18\u5148\u7ea7\uff1a")])}],!1,null,null,null);tt.options.__file="todo/detail/priority.vue";function et(){var i=this,t=i.$createElement,n=i._self._c||t;return n("dl",{staticClass:"z-left"},[i._m(0),i._v(" "),n("dd",{staticClass:"k-todo-clock"},[0===i.selected.length?n("span",[i._v("\u5f85\u8bbe\u7f6e")]):i._e(),i._v(" "),i._l(i.selected,function(t,e){return n("span",{key:t,staticClass:"selected"},[i._v(i._s(i.options[t].name))])})],2)])}var it=tt.exports;et._withStripped=!0;var nt={inject:["getThing"],data:function(){return{selected:[],thing:{},options:[{name:"\u5f00\u59cb\u65f6\u524d5\u5206\u949f",value:0,checked:!1},{name:"\u5f00\u59cb\u65f6\u524d15\u5206\u949f",value:1,checked:!1},{name:"\u5f00\u59cb\u65f6\u524d30\u5206\u949f",value:2,checked:!1},{name:"\u5f00\u59cb\u65f6\u524d1\u5929",value:3,checked:!1}]}},mounted:function(){if(this.thing=this.getThing(),!this.thing.remind)return this.selected=[];this.selected=this.thing.remind.split(","),this.checkStatus()},methods:{select:function(t){if(-1===this.selected.indexOf(t))this.selected.push(t);else for(var e=0;e<this.selected.length;e++)this.selected[e]===t&&this.selected.splice(e,1);this.emit()},checkStatus:function(){for(var t=0;t<this.options.length;t++){this.options[t].checked=!1;for(var e=0;e<this.selected.length;e++)this.options[t].value===this.selected[e]&&(this.options[t].checked=!0)}},emit:function(){this.checkStatus(),this.thing.remind=this.selected.join(","),this.$emit("input",this.thing)}}},st=Object(r.a)(nt,et,[function(){var t=this.$createElement,e=this._self._c||t;return e("dt",[e("i",{staticClass:"ft icon h2"},[this._v("\ue6b1")]),this._v("\u63d0\u9192\u8bbe\u7f6e\uff1a\n    ")])}],!1,null,null,null);st.options.__file="todo/detail/clock.vue";function at(){var e=this,t=e.$createElement,i=e._self._c||t;return i("z-row",{staticClass:"header"},[i("z-col",{attrs:{span:1}},[i("i",{staticClass:"ft icon h1"},[e._v("\ue740")])]),e._v(" "),i("z-col",{attrs:{span:23}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.value.title,expression:"value.title"}],attrs:{disabled:1===e.value.status,type:"text",maxlength:"60"},domProps:{value:e.value.title},on:{change:e.change,input:function(t){t.target.composing||e.$set(e.value,"title",t.target.value)}}}),e._v(" "),i("div",{staticClass:"time"},[i("z-nick",{attrs:{uid:e.value.uid}}),e._v("\n            \u521b\u5efa\u4e8e\uff1a\n            "),i("z-idate",{attrs:{value:e.value._id}})],1)])],1)}var ot=st.exports;at._withStripped=!0;var rt={name:"detailHeader",props:["value","type"],methods:{change:function(){var t=1===this.type?"/patch/archive.json":"/thing/patch.do";$.post({title:this.value.title,_id:this.value._id},t,function(t){$.emit("thingUpdate",this.value,"title")},this)}}},lt=Object(r.a)(rt,at,[],!1,null,null,null);lt.options.__file="todo/detail/header.vue";function ct(){var e=this,t=e.$createElement,i=e._self._c||t;return i("z-row",{staticClass:"z-row k-todo-list"},[i("z-col",{attrs:{span:1}},[i("span",{staticClass:"ft icon h2"},[e._v("\ue819")])]),e._v(" "),i("z-col",{attrs:{span:23}},[i("div",{staticClass:"title"},[i("strong",[e._v("\u5b50\u4efb\u52a1\u5217\u8868")]),e._v(" "),i("z-button",{staticClass:"right",attrs:{size:"mini",type:"primary"},on:{click:e.add}},[e._v("\u6dfb\u52a0\u5b50\u4efb\u52a1")])],1),e._v(" "),e.list&&0<e.list.length?i("z-progress",{attrs:{percentage:e.percent,color:"#67c23a"}}):i("div",{staticClass:"empty"},[e._v("\u6682\u65e0\u5b50\u4efb\u52a1")]),e._v(" "),e._l(e.list,function(t){return i("TodoItem",{key:t._id,attrs:{value:t}})}),e._v(" "),e.visible?i("Editor",{attrs:{list:e.list},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}}):e._e()],2)],1)}function dt(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"k-todo-item",class:{finished:!!e.item.status}},[i("i",{staticClass:"ft icon status hover",on:{click:e.finish}}),e._v(" "),i("span",{staticClass:"content",on:{click:e.show}},[e._v("\n        "+e._s(e.item.title)+"\n    ")]),e._v(" "),i("z-confirm",{attrs:{type:"text",tip:"\u786e\u5b9a\u5220\u9664\u5417"},on:{click:e.remove}},[i("i",{staticClass:"ft icon hover remove"},[e._v("\ue6c2")])]),e._v(" "),e.visible?i("Editor",{attrs:{todo:e.item},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}}):e._e()],1)}function ut(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"todo-editor"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.item.title,expression:"item.title"}],staticClass:"input",attrs:{type:"text",autofocus:"",maxlength:"90",placeholder:"\u6309\u56de\u8f66\u952e\uff0c\u6dfb\u52a0\u5b50\u4efb\u52a1"},domProps:{value:e.item.title},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:(t.stopPropagation(),e.hide(t))},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submit(t)},input:function(t){t.target.composing||e.$set(e.item,"title",t.target.value)}}}),e._v(" "),i("div",[i("z-button",{attrs:{type:"success",size:"mini"},on:{click:e.submit}},[e._v("\u4fdd\u5b58")]),e._v(" "),i("z-button",{attrs:{type:"info",size:"mini"},on:{click:e.hide}},[e._v("\u53d6\u6d88")]),e._v(" "),i("z-popover",{scopedSlots:e._u([{key:"reference",fn:function(){},proxy:!0}]),model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[i("z-employee",{attrs:{value:e.owner,max:1}}),e._v(" "),i("div",{staticClass:"operator"},[i("z-button",{attrs:{plain:"",size:"mini"},on:{click:e.close}},[e._v("\u53d6\u6d88")]),e._v(" "),i("z-button",{attrs:{size:"mini",type:"primary"},on:{click:e.setOwner}},[e._v("\u786e\u5b9a")])],1)],1)],1)])}var ht=lt.exports;ut._withStripped=dt._withStripped=ct._withStripped=!0;var vt={props:["value","todo","list"],data:function(){return{owner:null,item:{title:""},visible:!1}},inject:["getThing"],mounted:function(){this.todo&&(this.item=this.todo),this.$nextTick(function(){$(".input",this.$el).el[0].focus()})},methods:{submit:function(){var e=this;if(this.item.title){var i={title:this.item.title};if(this.item._id)i._id=this.item._id,$.post(i,"/patch/childThing.json",function(t){e.todo.title=i.title,e.hide()},this);else{var t=this.getThing();i.parentId=t._id,i.status=0,$.post(i,"/put/childThing.json",function(t){i._id=t.data._id,e.list.push(i),e.item.title=""},this)}}},setOwner:function(){},hide:function(){this.$emit("input",!1)},close:function(){this.visible=!1}}},pt=Object(r.a)(vt,ut,[],!1,null,null,null);pt.options.__file="todo/detail/subTodo/editor.vue";var ft=pt.exports,mt={data:function(){return{visible:!1,item:{}}},props:["value"],inject:["log"],components:{Editor:ft},mounted:function(){this.item=this.value},methods:{remove:function(){var e=this;$.post({id:this.item._id},"/thing/removeThing.do",function(t){e.$emit("removeThing",e.index),e.log("\u79fb\u9664\u4e86\u4efb\u52a1\u4e0a\u7684\u6e05\u5355 "+e.item.title)})},finish:function(){var e=this,i=0===this.item.status?1:0;$.post({_id:this.item._id,status:i},"/patch/childThing.json",function(t){e.item.status=i,e.log("\u5b8c\u6210\u4e86\u4efb\u52a1\u4e0a\u7684 "+e.item.title)},this)},show:function(){this.visible=!0}}},_t=Object(r.a)(mt,dt,[],!1,null,null,null);_t.options.__file="todo/detail/subTodo/todoItem.vue";var gt={data:function(){return{visible:!1,list:[]}},components:{TodoItem:_t.exports,Editor:ft},props:["value"],mounted:function(){this.getList()},computed:{percent:function(){var t=this.list.length,e=0;return this.list.forEach(function(t){return t.status&&e++}),0===t?0:e=parseInt(e/t*100)}},methods:{cmd:function(t){},getList:function(){var e=this;$.post({parentId:this.value._id},"/mix/thingList.json",function(t){e.list=t.data})},add:function(){this.visible=!0},remove:function(t){this.list.splice(t,1)}}},wt=Object(r.a)(gt,ct,[],!1,null,null,null);wt.options.__file="todo/detail/subTodo/index.vue";function bt(){var n=this,t=n.$createElement,s=n._self._c||t;return 0!==n.files.length?s("z-row",{staticClass:"z-row k-files-list"},[s("z-col",{attrs:{span:1}},[s("span",{staticClass:"ft icon h2"},[n._v("\ue8b9")])]),n._v(" "),s("z-col",{attrs:{span:23}},[s("div",{staticClass:"title"},[s("strong",[n._v("\u9644\u4ef6")]),n._v(" "),s("label",{staticClass:"right",attrs:{for:"J_list_file"}},[s("span",{staticClass:"el-button el-button--primary el-button--mini"},[n._v("\u6dfb\u52a0\u9644\u4ef6")]),n._v(" "),s("input",{staticClass:"hide",attrs:{type:"file",id:"J_list_file",name:"file"},on:{change:n.change}})])]),n._v(" "),n._l(n.files,function(e,i){return s("div",{staticClass:"item-file z-row"},[s("div",{staticClass:"z-6 left-txt"},[n._v("\n                "+n._s(e.title.substring(e.title.length-3,e.title.length))+"\n            ")]),n._v(" "),s("div",{staticClass:"z-16 right-content"},[s("a",{attrs:{href:n.domain+e.url,target:"_blank"}},[s("p",{staticClass:"title"},[n._v(n._s(e.title))]),n._v(" "),s("span",[n._v(n._s(n._f("date")(e.addtime)))])]),n._v(" "),s("z-confirm",{staticClass:"z-link remove",attrs:{type:"text",tip:"\u786e\u5b9a\u5220\u9664\u8be5\u9644\u4ef6\u5417\uff1f"},on:{click:function(t){return n.del(e._id,e.title,i)}}},[n._v("\u5220\u9664\n                ")])],1)])})],2)],1):n._e()}var yt=wt.exports;bt._withStripped=!0;var kt={name:"detailAttach",data:function(){return{files:[],itemId:null}},inject:["log","getThing"],computed:{domain:function(){return 1<zen.mode?"":"https://img.yimiyisu.com"}},created:function(){var t=this.getThing();this.itemId=t._id,$.on("uploadAttach",this.add),this.load()},destroyed:function(){$.off("uploadAttach")},methods:{add:function(t){this.files.push(t)},load:function(){var e=this;$.post({parentId:this.itemId},"/select/attachByParentId.json",function(t){e.files=t.data},this)},del:function(t,e,i){var n=this;$.post({_id:t},"/delete/attach.json",function(t){n.files.splice(i,1),n.log("\u5220\u9664\u4e86\u9644\u4ef6 "+e)})},change:function(t){var i=t.target.files;$.post({file:i[0],parentId:this.itemId},"/upload/file.do",function(t){var e=t.data;this.files.push(t.data),$.post({parentId:this.itemId,url:e.url,size:e.size,title:e.title},"/put/attach.json",function(){this.load()},this),this.log("\u6dfb\u52a0\u4e86\u9644\u4ef6 "+i[0].name)},this)}}},Ct=Object(r.a)(kt,bt,[],!1,null,null,null);Ct.options.__file="todo/detail/attach.vue";function xt(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("Finish"),t._v(" "),i("Priority"),t._v(" "),i("Owner"),t._v(" "),i("Plan"),t._v(" "),i("Remind"),t._v(" "),i("Attach"),t._v(" "),i("Watcher"),t._v(" "),i("Archive"),t._v(" "),i("Remove")],1)}function $t(){var t=this,e=t.$createElement,i=t._self._c||e;return i("label",{staticClass:"btn",attrs:{for:"J_attach_file"}},[i("i",{staticClass:"ft icon"},[t._v("\ue701")]),t._v("\u9644\u4ef6\n    "),i("input",{staticClass:"hide",attrs:{id:"J_attach_file",type:"file",name:"file"},on:{change:t.change}})])}var zt=Ct.exports;$t._withStripped=xt._withStripped=!0;var St={name:"detailAttachAction",inject:["getThing","log"],methods:{change:function(t){var e=this,i=t.target.files,n=this.getThing();$.post({file:i[0],parentId:n._id},"/upload/file.do",function(t){$.emit("uploadAttach",t.data),e.log("\u6dfb\u52a0\u4e86\u9644\u4ef6 "+i[0].name)},this)}}},jt=Object(r.a)(St,$t,[],!1,null,null,null);jt.options.__file="todo/detail/actions/attach.vue";function Tt(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"btn",on:{click:e.trigger}},[i("i",{staticClass:"ft icon"},[e._v("\ue764")]),e._v(e._s(e.text)+"\n    "),i("z-popover",{model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[i("z-employee",{attrs:{max:1},model:{value:e.people,callback:function(t){e.people=t},expression:"people"}}),e._v(" "),i("div",{staticClass:"k-detail-operator"},[i("z-button",{attrs:{plain:"",size:"mini"},on:{click:function(t){return t.stopPropagation(),e.close(t)}}},[e._v("\u53d6\u6d88")]),e._v(" "),i("z-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return t.stopPropagation(),e.submit(t)}}},[e._v("\u786e\u5b9a")])],1)],1)],1)}var It=jt.exports;Tt._withStripped=!0;var Et={data:function(){return{thingId:null,isOnwer:!1,hasWatch:!1,people:null,visible:!1}},inject:["getThing"],computed:{text:function(){return this.isOnwer?"\u5173\u6ce8\u4eba":this.hasWatch?"\u53d6\u6d88\u5173\u6ce8":"\u5173\u6ce8\u8be5\u4efb\u52a1"}},created:function(){var t=this.getThing(),n=zen.user.uid;this.thingId=t._id,t.owner===n&&(this.isOnwer=!0),$.get({thingId:this.thingId},"/select/thingWatcherByThing.json",function(t){var e=this,i=t.data;i&&0!==i.length&&(i.forEach(function(t){return t.uid===n&&(e.hasWatch=!0)}),$.emit("detailWatcher",i,"new"))},this)},methods:{trigger:function(){if(this.isOnwer)return this.visible=!0;var t=zen.user.uid;if(this.hasWatch)return $.post({thingId:this.thingId,uid:t},"/delete/thingWatcherUid.json",function(){this.hasWatch=!1,$.emit("detailWatcher",t,"remove")},this);this.people=t,this.submit(),this.hasWatch=!0},close:function(){this.visible=!1},submit:function(){if(!this.people)return this.close();$.post({thingId:this.thingId,uid:this.people},"/thing/addWatcher.do",function(t){t.data&&$.emit("detailWatcher",t.data,"add"),this.close()},this)}}},Ot=Object(r.a)(Et,Tt,[],!1,null,null,null);Ot.options.__file="todo/detail/actions/watcher.vue";function qt(){var e=this,t=e.$createElement,i=e._self._c||t;return i("z-popover",{attrs:{trigger:"click"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[i("z-employee",{attrs:{max:1},on:{input:e.change}}),e._v(" "),i("div",{staticClass:"k-detail-operator"},[i("z-button",{attrs:{plain:"",size:"mini"},on:{click:e.close}},[e._v("\u53d6\u6d88")]),e._v(" "),i("z-button",{attrs:{size:"mini",type:"primary"},on:{click:e.submit}},[e._v("\u786e\u5b9a")])],1),e._v(" "),i("template",{slot:"reference"},[i("div",{staticClass:"btn"},[i("i",{staticClass:"ft icon"},[e._v("\ue6fd")]),e._v("\u8d1f\u8d23\u4eba\n        ")])])],2)}var Dt=Ot.exports;qt._withStripped=!0;var Nt={data:function(){return{owner:null,nick:null,visible:!1}},inject:["getThing","log"],methods:{close:function(){this.visible=!1},change:function(t,e){this.owner=t,e&&(this.nick=e.text)},submit:function(){var t=this,e=this.getThing();if(e.owner===this.owner)return $.notice("\u4e0d\u80fd\u8f6c\u7ed9\u540c\u4e00\u4e2a\u4eba","error");$.post({_id:e._id,owner:this.owner},"/thing/patch.do",function(){e.owner=t.owner,$.emit("thingUpdate",e,"owner"),t.nick&&t.log("\u628a\u8d1f\u8d23\u4eba\u6539\u4e3a"+t.nick),t.close()},this)}}},Pt=Object(r.a)(Nt,qt,[],!1,null,null,null);Pt.options.__file="todo/detail/actions/owner.vue";function Lt(){var e=this,t=e.$createElement,i=e._self._c||t;return i("z-popover",{model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[i("z-date",{attrs:{type:"datetime",clearable:!1},model:{value:e.text,callback:function(t){e.text=t},expression:"text"}}),e._v(" "),i("div",{staticClass:"k-detail-operator"},[i("z-button",{attrs:{plain:"",size:"mini"},on:{click:e.close}},[e._v("\u53d6\u6d88")]),e._v(" "),i("z-button",{attrs:{size:"mini",type:"primary"},on:{click:e.submit}},[e._v("\u786e\u5b9a")])],1),e._v(" "),i("template",{slot:"reference"},[i("span",{staticClass:"btn"},[i("i",{staticClass:"ft icon"},[e._v("\ue706")]),e._v("\u5b8c\u6210\u65f6\u95f4\n        ")])])],2)}var At=Pt.exports;Lt._withStripped=!0;var Ut={data:function(){return{thing:null,text:"",visible:!1}},inject:["getThing","log"],created:function(){this.thing=this.getThing(),this.text=$.date(this.thing.end)},methods:{close:function(){this.visible=!1},submit:function(){var e=this,i=new Date(this.text).getTime()/1e3;$.post({_id:this.thing._id,end:i},"/thing/patch.do",function(t){e.visible=!1,e.log("\u5c06\u8be5\u4efb\u52a1\u7684\u5230\u671f\u65e5\u66f4\u6539\u4e3a "+$.date(i)),e.thing.end=i})}}},Jt=Object(r.a)(Ut,Lt,[],!1,null,null,null);Jt.options.__file="todo/detail/actions/plan.vue";function Wt(){var i=this,t=i.$createElement,n=i._self._c||t;return n("z-popover",{attrs:{trigger:"click",width:"150",placement:"top"},model:{value:i.visible,callback:function(t){i.visible=t},expression:"visible"}},[n("ul",{staticClass:"k-quard-list"},i._l(i.priority,function(e,t){return n("li",{key:t,style:{color:e.color},on:{click:function(t){return i.quard(e.type,e.title)}}},[n("i",{directives:[{name:"show",rawName:"v-show",value:e.type===i.thing.quadrant,expression:"item.type === thing.quadrant"}],staticClass:"ft icon"},[i._v("\ue6d9")]),i._v(" "),n("i",{directives:[{name:"show",rawName:"v-show",value:e.type!==i.thing.quadrant,expression:"item.type !== thing.quadrant"}],staticClass:"ft icon"},[i._v("\ue770")]),i._v("\n            "+i._s(e.title)+"\n        ")])}),0),i._v(" "),n("template",{slot:"reference"},[n("div",{staticClass:"btn"},[n("i",{staticClass:"ft icon"},[i._v("\ue7ad")]),i._v("\u4f18\u5148\u7ea7")])])],2)}var Mt=Jt.exports;Wt._withStripped=!0;var Qt={data:function(){return{thing:null,visible:!1,priority:[{title:"\u91cd\u8981\u4e14\u7d27\u6025",type:"a",color:"#f80e15"},{title:"\u91cd\u8981\u4e0d\u7d27\u6025",type:"b",color:"#BF9F03"},{title:"\u7d27\u6025\u4e0d\u91cd\u8981",type:"c",color:"#009fe3"},{title:"\u4e0d\u7d27\u6025\u4e0d\u8981",type:"d",color:"#79aa1c"}]}},inject:["getThing","log"],created:function(){this.thing=this.getThing()},methods:{quard:function(t,e){var i=this;this.thing.quadrant=t,$.post({_id:this.thing._id,quadrant:t},"/thing/patch.do",function(t){i.log("\u8bbe\u7f6e\u4e86\u4f18\u5148\u7ea7 "+e)})}}},Vt=Object(r.a)(Qt,Wt,[],!1,null,null,null);Vt.options.__file="todo/detail/actions/priority.vue";function Ft(){var e=this,t=e.$createElement,i=e._self._c||t;return i("z-popover",{model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[i("z-input",{staticStyle:{width:"360px"},attrs:{label:"\u6807\u9898",name:"title",placeholder:"\u8bf7\u8f93\u5165\u6807\u9898"},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}}),e._v(" "),i("div",{staticClass:"operator"},[i("z-button",{attrs:{plain:"",size:"mini"},on:{click:e.close}},[e._v("\u53d6\u6d88")]),e._v(" "),i("z-button",{attrs:{size:"mini",type:"primary"},on:{click:e.submit}},[e._v("\u6dfb\u52a0")])],1),e._v(" "),i("div",{staticClass:"btn",attrs:{slot:"reference"},slot:"reference"},[i("i",{staticClass:"ft icon"},[e._v("\ue6f1")]),e._v("\u5b50\u4efb\u52a1\n    ")])],1)}var Rt=Vt.exports;Ft._withStripped=!0;var Bt={data:function(){return{thing:null,visible:!1,title:""}},inject:["getThing","log"],created:function(){this.thing=this.getThing()},methods:{close:function(){this.visible=!1},submit:function(){var e=this;if(""===this.title)return $.notice("\u6e05\u5355\u6807\u9898\u4e0d\u80fd\u4e3a\u7a7a","error");$.post({title:this.title,parentId:this.thing._id,status:0},"/put/childThing.json",function(t){e.visible=!1,$.emit("todo_getData",null),e.log("\u4e3a\u8fd9\u4e2a\u4efb\u52a1\u6dfb\u52a0\u4e86\u5f85\u529e\u6e05\u5355 "+e.title)})}}},Ht=Object(r.a)(Bt,Ft,[],!1,null,null,null);Ht.options.__file="todo/detail/actions/todo.vue";function Gt(){var i=this,t=i.$createElement,n=i._self._c||t;return n("z-popover",[n("div",{staticClass:"btn",attrs:{slot:"reference"},slot:"reference"},[n("i",{staticClass:"ft icon",attrs:{slot:"reference"},slot:"reference"},[i._v("\ue6b1")]),i._v("\u63d0\u9192\u8bbe\u7f6e\n    ")]),i._v(" "),n("ul",{staticClass:"k-quard-list"},i._l(i.remind,function(e){return n("li",{class:{active:i.thing.remind===e.value},on:{click:function(t){return i.click(e.value)}}},[n("i",{directives:[{name:"show",rawName:"v-show",value:e.value==i.thing.remind,expression:"item.value == thing.remind"}],staticClass:"ft icon"},[i._v("\ue6d9")]),i._v(" "),n("i",{directives:[{name:"show",rawName:"v-show",value:e.value!=i.thing.remind,expression:"item.value != thing.remind"}],staticClass:"ft icon"},[i._v("\ue770")]),i._v("\n            "+i._s(e.title)+"\n        ")])}),0)])}var Kt=Ht.exports,Xt={inject:["getThing","log"],data:function(){return{thing:null}},created:function(){this.thing=this.getThing()},render:function(t){var e=t;return this.thing.status?e("div",{class:"btn ft green",on:{click:this.doFinish}},[e("i",{class:"ft icon"},["\ue6d5"]),"\u8bbe\u4e3a\u672a\u5b8c\u6210"]):e("div",{class:"btn",on:{click:this.doFinish}},[e("i",{class:"ft icon"},["\ue6cb"]),"\u6807\u8bb0\u5df2\u5b8c\u6210"])},methods:{doFinish:function(){var t=this,e=this.thing;if(zen.user.uid!==e.owner)return $.notice("\u53ea\u6709\u8d1f\u8d23\u4eba\u624d\u80fd\u70b9\u51fb\u5b8c\u6210","error");var i=e.status?0:1;$.post({status:i,_id:e._id,projectId:e.projectId},"/thing/patch.do",function(){1==(e.status=i)?t.log("\u5b8c\u6210\u4e86\u8fd9\u4e2a\u4efb\u52a1"):t.log("\u91cd\u65b0\u6253\u5f00\u4e86\u8fd9\u4e2a\u4efb\u52a1"),$.emit("thingUpdate",e,"status")},this)}}};Gt._withStripped=!0;var Yt={data:function(){return{thing:null,remind:[{title:"\u5f00\u59cb\u65f65\u5206\u949f",value:0},{title:"\u5f00\u59cb\u65f6\u524d15\u5206\u949f",value:1},{title:"\u5f00\u59cb\u65f6\u524d30\u5206\u949f",value:2},{title:"\u5f00\u59cb\u65f6\u524d1\u5929",value:3}]}},inject:["getThing"],created:function(){this.thing=this.getThing()},methods:{click:function(t){this.thing.remind=t,$.post({_id:this.thing._id,remind:t},"/thing/patch.do",function(t){})}}},Zt=Object(r.a)(Yt,Gt,[],!1,null,null,null);Zt.options.__file="todo/detail/actions/remind.vue";function te(){var t=this,e=t.$createElement,i=t._self._c||e;return i("z-confirm",{staticClass:"btn remove",attrs:{tip:"\u786e\u5b9a\u5220\u9664\u5417\uff1f"},on:{click:t.remove}},[i("i",{staticClass:"ft icon"},[t._v("\ue6fb")]),t._v(" \u5220\u9664\n")])}var ee=Zt.exports;te._withStripped=!0;var ie={inject:["getThing","close","log"],methods:{remove:function(){var e=this.getThing();$.post({_id:e._id},"/thing/remove.do",function(t){this.log("\u5220\u9664\u4e86\u4efb\u52a1"),$.emit("thingUpdate",e,"remove"),this.close()},this)}}},ne=Object(r.a)(ie,te,[],!1,null,null,null);ne.options.__file="todo/detail/actions/remove.vue";function se(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"btn",on:{click:t.click}},[i("i",{staticClass:"ft icon"},[t._v("\ue85f")]),t._v(t._s(t.title)+"\n")])}var ae=ne.exports;se._withStripped=!0;var oe={inject:["getThing","close","log"],data:function(){return{title:"\u5f52\u6863",archiveId:null}},methods:{click:function(){var t,e=this,i=this.getThing(),n={};t=this.archiveId?(n._id=this.archiveId,"/thing/restore.do"):(n._id=i._id,"/thing/archive.do"),$.post(n,t,function(t){if(e.archiveId)return e.title="\u5f52\u6863",e.archiveId=null,e.log("\u53d6\u6d88\u4efb\u52a1\u5f52\u6863"),$.emit("thingUpdate",t.data,"add");e.title="\u53d6\u6d88\u5f52\u6863",e.archiveId=t.data._id,e.log("\u5c06\u4efb\u52a1\u5f52\u6863"),$.emit("thingUpdate",i,"remove")},this)}}},re=Object(r.a)(oe,se,[],!1,null,null,null);re.options.__file="todo/detail/actions/archive.vue";var le={name:"actions",components:{Attach:It,Watcher:Dt,Owner:At,Plan:Mt,Priority:Rt,Todo:Kt,Finish:Xt,Remind:ee,Archive:re.exports,Remove:ae}},ce=Object(r.a)(le,xt,[],!1,null,null,null);ce.options.__file="todo/detail/actions/index.vue";var de={props:["quadrant","type"],provide:function(){return{getThing:this.getThing,close:this.close,log:this.log,getType:this.getType}},data:function(){return{item:null,isShow:!1}},components:{Comment:q,Describe:U,Header:ht,Owner:Q,Tag:Y,Watcher:B,Priority:it,Clock:ot,SubTodo:yt,Attach:zt,Actions:ce.exports},mounted:function(){$.on("thingDetail",this.init)},methods:{getThing:function(){return this.item},getType:function(){return this.type},init:function(t){var e="/get/thingById.json";1===this.type&&(e="/thing/archive_get.do"),$.post({_id:t},e,function(t){var e=t.data;e.end||(e.end=0),this.item=e,this.isShow=!0},this)},log:function(t){$.post({thingId:this.item._id,content:t},"/put/thingLog.json",function(t){})},close:function(){this.isShow=!1}}},ue=Object(r.a)(de,w,[],!1,null,null,null);ue.options.__file="todo/detail.vue";function he(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"k-calendar"},[i("div",{attrs:{id:"calendar"}}),t._v(" "),i("Add",{attrs:{value:t.eventData,visible:t.isShow,"is-cal":!0}})],1)}function ve(t){var e=new Date(1e3*t),i=1900+e.getYear(),n="0"+(e.getMonth()+1),s="0"+e.getDate(),a="0"+e.getHours(),o="0"+e.getMinutes(),r="0"+e.getSeconds();return"00"===a?i+"-"+n.substring(n.length-2,n.length)+"-"+s.substring(s.length-2,s.length):i+"-"+n.substring(n.length-2,n.length)+"-"+s.substring(s.length-2,s.length)+" "+a.substring(a.length-2,a.length)+":"+o.substring(o.length-2,o.length)+":"+r.substring(r.length-2,r.length)}var pe=ue.exports,fe={a:"#f80e15",b:"#d9b403",c:"#009fe3",d:"#79AA1C"};function me(t){var e={id:t._id,title:t.title};return t.quadrant&&(e.color=fe[t.quadrant]),0<t.start&&(e.start=ve(t.start)),0<t.end&&(86400<t.end-t.start?e.allDay=!0:t.end>t.start&&(e.end=ve(t.end))),e}function _e(){var e=this,t=e.$createElement,i=e._self._c||t;return e.isShow?i("z-dialog",{attrs:{title:"\u6dfb\u52a0\u5f85\u529e"}},[i("z-input",{attrs:{type:"textarea",placeholder:"\u8bf7\u8f93\u5165\u5f85\u529e\u5185\u5bb9",width:"100%",size:"small"},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}}),e._v(" "),i("div",{staticClass:"k-cal-add"},[i("div",{staticClass:"config-item"},[i("div",[i("i",{staticClass:"ft icon"},[e._v("\ue6af")]),e._v("\u4f18\u5148\u7ea7:")]),e._v(" "),i("div",{staticStyle:{margin:"0 10px"}},[i("Priority",{model:{value:e.item,callback:function(t){e.item=t},expression:"item"}})],1)])]),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("z-button",{on:{click:e.close}},[e._v("\u53d6\u6d88")]),e._v(" "),i("z-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("\u786e\u5b9a")])],1)],1):e._e()}var ge=function(t){if(!Array.isArray(t))return me(t);for(var e,i=[],n=0;n<t.length;n++)e=me(t[n]),i.push(e);return i},we=function(t){return fe[t]};_e._withStripped=he._withStripped=!0;var be={props:["value","isCal"],data:function(){return{quadrant:"a",title:"",isShow:!1,item:{quadrant:"a"}}},components:{Priority:it},methods:{close:function(){this.isCal&&this.$parent.addThing(null),this.isShow=!1},show:function(){this.visible=!0},blur:function(){this.isShow=!1},submit:function(){if(!this.title)return alert("\u5f85\u529e\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a");var e={quadrant:this.item.quadrant,title:this.title,projectId:"",tag:""};if(this.isCal){var t=parseInt(this.value.start.start.getTime()/1e3),i=parseInt(this.value.start.end.getTime()/1e3),n=i-(e.start=t);(86400<n||n<43200)&&(e.end=i)}this.$parent.projectId&&(e.projectId=this.$parent.projectId),$.post(e,"/thing/put.do",function(t){e._id=t.data._id,this.$parent.addThing(e),this.close(),this.title=""},this)},select:function(t){this.quadrant=t}}},ye=Object(r.a)(be,_e,[],!1,null,null,null);ye.options.__file="calendar/add.vue";var ke={props:["value"],components:{Add:ye.exports},data:function(){return{calendar:null,currentEvt:null,eventData:{},isShow:!1}},created:function(){$.lib(["calendar/main.min.js","calendar/interaction/min.js","calendar/daygrid/min.js","calendar/timegrid/min.js"],this.init),$.on("thingUpdate",this.update)},methods:{init:function(){var t={plugins:["interaction","dayGrid","timeGrid"],header:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek"},locale:"zh-cn",navLinks:!0,timezone:"Asia/Shanghai",fixedWeekCount:!1,aspectRatio:1.8,windowResizeDelay:300,selectable:!0,selectHelper:!0,select:this.add,eventClick:this.detail,eventResize:this.change,eventDrop:this.change,minTime:"06:00:00",maxTime:"23:00:00",scrollTime:"08:00:00",editable:!0,eventLimit:!0,events:[]};t.defaultDate=new Date,t.events=ge(this.value),this.calendar=new FullCalendar.Calendar(document.getElementById("calendar"),t),this.$nextTick(function(){this.calendar.render(),this.calendar.refetchEvents()})},change:function(t){var e={_id:t.event.id,start:t.event.start.getTime()/1e3};t.event.end&&(e.end=t.event.end.getTime()/1e3),$.post(e,"/thing/patch.do",function(t){},this)},update:function(t){if(t.owner!==zen.user.id)return this.remove(t._id);this.calendar.getEventById(t._id).remove();var e={color:we(t.quadrant),id:t._id,start:1e3*t.start,title:t.title};this.calendar.addEvent(e)},add:function(t,e){this.isShow=!0,this.eventData={start:t,end:e}},addThing:function(t){if(t){var e=ge(t);this.calendar.addEvent(e)}else this.calendar.unselect()},detail:function(t,e,i){this.currentEvt=t,$.emit("thingDetail",t.event.id)},remove:function(t){this.calendar.removeEvents([t])}}},Ce=Object(r.a)(ke,he,[],!1,null,null,null);Ce.options.__file="calendar/index.vue";function xe(){var i=this,t=i.$createElement,n=i._self._c||t;return n("z-row",{staticClass:"k-doc",attrs:{type:"flex",justify:"space-between"}},[n("z-col",{attrs:{span:4}},[n("h3",[i._v("\n            \u6211\u7684\u77e5\u8bc6\u5e93\n            "),n("Search")],1),i._v(" "),n("z-scrollbar",{attrs:{height:-150}},[n("z-list",{attrs:{url:"/note/my.do",id:"J_docList",callback:i.callback},scopedSlots:i._u([{key:"default",fn:function(e){return[n("div",{key:e._id,staticClass:"doc-item",class:{active:i.current._id===e._id},on:{click:function(t){return i.select(e,t)}}},[i._v(i._s(e.title)+"\n                        "),n("div",{staticClass:"time"},[i._v("\n                            "+i._s(i._f("idate")(e._id))+"\n                            "),n("z-execute",{attrs:{type:"text",tip:"\u786e\u5b9a\u5220\u9664\u5417\uff1f",action:"/note/remove.do?_id="+e._source}},[n("i",{staticClass:"ft icon"},[i._v("\ue8f8")])])],1)])]}}])})],1)],1),i._v(" "),n("z-col",{attrs:{span:20}},[i.content?n("Editor",{attrs:{data:i.current,summary:i.content}}):i._e()],1)],1)}function $e(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"k-repository"},[i("div",{staticClass:"z-row"},[i("div",{staticClass:"z-12 h3"},[t._v("\n                "+t._s(t.data.title)+"\n            ")]),t._v(" "),i("div",{staticClass:"z-12",staticStyle:{"text-align":"right"}},[i("AddDoc",{staticClass:"el-button el-button--small is-plain"},[t._v("\u65b0\u589e\u7ae0\u8282")]),t._v(" "),i("z-link",{attrs:{target:"_blank",type:"button",href:"/view.html?id="+t.data._id,size:"small"}},[t._v("\u67e5\u770b")]),t._v(" "),i("z-wicket",{attrs:{plain:"",action:"/note/patch.do","wicket-size":"small",prop:t.data,view:"J_title",callback:t.changeTitle}},[t._v("\u4fee\u6539\u6807\u9898\n                ")]),t._v(" "),t.pid?t._e():i("Set",{attrs:{permision:t.data.permision,note:t.data._id}},[t._v("\u8bbe\u7f6e")])],1)]),t._v(" "),i("z-scrollbar",{attrs:{height:-180}},[t.summary&&0!==t.summary.sons.length?t._e():i("div",{staticClass:"empty"},[i("i",{staticClass:"ft icon"},[t._v("\ue718")]),t._v("\u6682\u65e0\u7ae0\u8282")]),t._v(" "),i("Chapter",{key:"root",staticClass:"chapter-list",attrs:{value:t.summary.sons,readonly:t.readonly}})],1)],1),t._v(" "),i("Board",{attrs:{itemId:t.docId,nodes:t.summary.sons}})],1)}function ze(){var i=this,t=i.$createElement,n=i._self._c||t;return n("z-draggable",{attrs:{list:i.value,group:"item"},on:{end:i.end}},i._l(i.value,function(e){return n("div",{key:e.id,staticClass:"group"},[n("div",{staticClass:"guide",attrs:{"data-id":e.id}}),i._v(" "),n("div",{staticClass:"item",attrs:{"data-id":e.id}},[n("hr"),i._v(" "),n("div",{staticClass:"header"},[n("Icon",{attrs:{value:e}}),i._v(" "),e.link?n("div",{staticClass:"title",on:{click:function(t){return i.view(e)}}},[i._v("\n                    "+i._s(e.title)+"\n                ")]):n("AddDoc",{staticClass:"title",attrs:{item:e}},[i._v(i._s(e.title))])],1),i._v(" "),i.readonly?n("div",{staticClass:"info"},[i._v("\n                "+i._s(i._f("idate")(e.link))+"\n            ")]):n("div",{staticClass:"info"},[n("ChangeTitle",{staticClass:"ft icon hover",attrs:{value:e}},[i._v("\ue88e")]),i._v(" "),n("AddDoc",{staticClass:"ft icon hover",attrs:{parent:e,title:"\u6dfb\u52a0\u5b50\u7ae0\u8282"}},[i._v("\ue8c8")]),i._v(" "),n("z-confirm",{staticClass:"ft icon hover",attrs:{type:"text",tip:"\u786e\u5b9a\u5220\u9664\u6587\u6863\u5417"},on:{click:function(t){return i.trigger(e,"remove")}}},[i._v("\n                    \ue8f8\n                ")])],1)]),i._v(" "),!1!==e.status&&e.sons&&0<e.sons.length?n("Chapter",{key:"s"+e.id,attrs:{readonly:i.readonly,value:e.sons}}):i._e()],1)}),0)}function Se(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tip"},["1"===t.number?i("z-tooltip",{attrs:{content:"\u6587\u672c\u6587\u6863"}},[i("i",{staticClass:"doc-icon ft icon"},[t._v("\ue7be")])]):t._e(),t._v(" "),"2"===t.number?i("z-tooltip",{attrs:{content:"\u601d\u7ef4\u5bfc\u56fe"}},[i("i",{staticClass:"doc-icon ft icon"},[t._v("\ue787")])]):t._e(),t._v(" "),"5"===t.number?i("z-tooltip",{attrs:{content:"\u6d41\u7a0b\u56fe"}},[i("i",{staticClass:"doc-icon ft icon"},[t._v("\ue779")])]):t._e(),t._v(" "),"6"===t.number?i("z-tooltip",{attrs:{content:"\u8868\u683c"}},[i("i",{staticClass:"doc-icon ft icon"},[t._v("\ue7ad")])]):t._e(),t._v(" "),"4"===t.number?i("z-tooltip",{attrs:{content:"\u6587\u4ef6\u5939"}},[i("i",{staticClass:"doc-floder ft icon",class:{lap:!t.value.status}})]):t._e(),t._v(" "),t.number?t._e():i("z-tooltip",{attrs:{content:"\u6b64\u6587\u6863\u5c1a\u672a\u521b\u5efa"}},[i("i",{staticClass:"doc-icon ft icon"},[t._v("\ue76e")])])],1)}var je=Ce.exports;Se._withStripped=ze._withStripped=$e._withStripped=xe._withStripped=!0;var Te={props:["value"],computed:{number:function(){return this.value&&this.value.type?this.value.type+"":""}}},Ie=Object(r.a)(Te,Se,[],!1,null,null,null);Ie.options.__file="doc/repository/icon.vue";function Ee(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",{on:{click:e.toggle}},[e._t("default"),e._v(" "),e.isShow?i("z-dialog",{attrs:{title:"\u65b0\u5efa\u6587\u6863",width:"540px"},on:{close:e.toggle}},[i("z-form",{attrs:{"label-width":"100px"},nativeOn:{submit:function(t){t.preventDefault()}}},[i("z-field",{attrs:{label:"\u6587\u6863\u6807\u9898"}},[i("z-input",{attrs:{width:"340px",type:"text"},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}})],1),e._v(" "),i("z-field",{attrs:{label:"\u6587\u6863\u7c7b\u578b"}},[i("z-radio",{attrs:{type:"button",data:e.types},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("z-button",{attrs:{plain:""},on:{click:e.toggle}},[e._v("\u53d6 \u6d88")]),e._v(" "),i("z-button",{attrs:{type:"primary"},on:{click:e.add}},[e._v("\u786e \u5b9a")])],1)],1):e._e()],2)}var Oe=Ie.exports;Ee._withStripped=!0;var qe={props:["parent","item"],data:function(){return{type:1,isShow:!1,title:"",types:[{value:1,text:"\u6587\u672c"},{value:2,text:"\u8111\u56fe"},{value:6,text:"\u8868\u683c"},{value:5,text:"\u6d41\u7a0b\u56fe"},{value:4,text:"\u76ee\u5f55"}]}},inject:["repository"],mounted:function(){this.item&&(this.title=this.item.title)},methods:{add:function(){if(!this.title)return $.notice("\u6807\u9898\u4e0d\u80fd\u4e3a\u7a7a","error");var i=this.repository,n=i.summary;n.id++;var s={content:"",title:this.title,type:this.type,parentId:i.data._id};$.post(s,"/note/add.do",function(t){var e=t.data;if(this.item)return this.mergeData(this.item,e,n.id),i.save();this.mergeData(s,e,n.id),this.parent?this.parent.sons.push(s):n.sons.push(s),this.title="",i.save()},this)},mergeData:function(t,e,i){t.sons||(t.sons=[]),t.link=e._id,t.id=i,t.type=this.type,4===this.type&&(t.status=!0,t.link="folder"),this.toggle()},toggle:function(){this.isShow=!this.isShow}}},De=Object(r.a)(qe,Ee,[],!1,null,null,null);De.options.__file="doc/repository/addDoc.vue";function Ne(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",{on:{click:e.show}},[e._t("default"),e._v(" "),e.visible?i("z-dialog",{attrs:{title:"\u4fee\u6539\u6807\u9898",width:"540px",visible:""},on:{click:e.close}},[i("z-form",{attrs:{"label-width":"100px"}},[i("z-input",{attrs:{label:"\u6587\u6863\u6807\u9898",width:"340px",type:"text",koo:"need"},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("z-button",{on:{click:e.close}},[e._v("\u53d6\u6d88")]),e._v(" "),i("z-button",{attrs:{type:"primary"},on:{click:e.update}},[e._v("\u786e\u5b9a")])],1)],1):e._e()],2)}var Pe=De.exports;Ne._withStripped=!0;var Le={props:["value"],data:function(){return{visible:!1,title:null}},created:function(){this.title=this.value.title},methods:{show:function(){this.visible=!0},close:function(){this.visible=!1},update:function(){if(!this.title)return $.notice("\u6807\u9898\u4e0d\u80fd\u4e3a\u7a7a","error");var t={_id:this.value.link||this.value._id,title:this.title},e={event:"save"};this.value.title=this.title,t._id&&$.post(t,"/note/patch.do",function(t){$.emit("chapterEvt",e),this.close()},this),$.emit("chapterEvt",e)}}},Ae=Object(r.a)(Le,Ne,[],!1,null,null,null);Ae.options.__file="doc/repository/changeTitle.vue";var Ue=Ae.exports,Je={name:"Chapter",props:["value","readonly","parent"],components:{Icon:Oe,ChangeTitle:Ue,AddDoc:Pe},data:function(){return{title:"",current:null}},methods:{end:function(t){t.newIndex!==t.oldIndex&&this.trigger(null,"save")},view:function(t){return"folder"===t.link?t.status=!t.status:"folder"===t.link?(t.status=!t.status,this.trigger(t.id,"folder")):void this.trigger(t.link,"doc")},fold:function(t){t.status=!t.status},trigger:function(t,e){var i={event:e,data:t};$.emit("chapterEvt",i)}}},We=Object(r.a)(Je,ze,[],!1,null,null,null);We.options.__file="doc/repository/chapter.vue";function Me(){var e=this,t=e.$createElement,i=e._self._c||t;return e.isShow?i("div",{staticClass:"k-doc-board"},[i("div",{staticClass:"rep-nav"},[i("dl",{staticClass:"z-left"},[i("dd",{staticClass:"active",on:{click:e.close}},[i("i",{staticClass:"ft icon"},[e._v("\ue6f6")])]),e._v(" "),i("dd",{on:{click:e.nav}},[i("z-tooltip",{attrs:{content:"\u77e5\u8bc6\u5e93\u76ee\u5f55"}},[i("i",{staticClass:"ft icon"},[e._v("\ue699")])])],1),e._v(" "),i("dd",[i("z-tooltip",{attrs:{content:"\u9884\u89c8\u6587\u6863"}},[i("a",{attrs:{href:"/view.html?id="+e.itemId,target:"_blank"},on:{click:e.debounce.flush}},[i("i",{staticClass:"ft icon"},[e._v("\ue878")])])])],1),e._v(" "),i("dt",[e._v("\n                "+e._s(e.value.title)+"\n                ")])]),e._v(" "),i("div",{staticClass:"z-noselect"},[e._v("\n            "+e._s(e.tooltip)+"\n        ")])]),e._v(" "),i(e.name,{tag:"component",attrs:{readonly:e.readonly,type:e.value.type},model:{value:e.value.content,callback:function(t){e.$set(e.value,"content",t)},expression:"value.content"}}),e._v(" "),i("div",{staticClass:"doc-nav",class:{show:e.showNav||4===e.value.type}},[i("i",{directives:[{name:"show",rawName:"v-show",value:e.showNav,expression:"showNav"}],staticClass:"z-icon close hover",on:{click:e.nav}},[e._v("\ue14c")]),e._v(" "),i("Nav",{attrs:{value:e.nodes,current:e.itemId}})],1)],1):e._e()}function Qe(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:!t.readonly,expression:"!readonly"}],staticClass:"k-rich"},[i("z-editor",{attrs:{value:t.value,mode:"full"},on:{input:t.save}})],1)}var Ve=We.exports;Qe._withStripped=Me._withStripped=!0;var Fe={props:["readonly","value"],data:function(){return{upload:null}},methods:{save:function(t){$.emit("docContentUpdate",t)}}},Re=Object(r.a)(Fe,Qe,[],!1,null,null,null);Re.options.__file="doc/word/index.vue";function Be(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"k-graph"},[e("iframe",{attrs:{src:"/doc/flow.html"},on:{load:this.sendData}})])}var He=Re.exports,Ge=i(1);Be._withStripped=!0;var Ke={name:"graph",props:["value","type"],watch:{value:function(){this.type+""=="5"&&this.sendData()}},mounted:function(){window.addEventListener("message",function(t){$.emit("docContentUpdate",t.data)},!1)},methods:{sendData:function(){this.$el.getElementsByTagName("iframe")[0].contentWindow.postMessage(this.value,"/")}}},Xe=Object(r.a)(Ke,Be,[],!1,null,null,null);Xe.options.__file="doc/graph/index.vue";function Ye(){var i=this,t=i.$createElement,n=i._self._c||t;return n("div",i._l(i.value,function(e){return n("div",{key:"nav"+e.id,staticClass:"chapter"},[n("div",{staticClass:"item",class:{active:e.link===i.current},on:{click:function(t){return i.selected(e)}}},[i._v("\n            "+i._s(e.title)+"\n        ")]),i._v(" "),e.sons&&0<e.sons.length?n("Nav",{attrs:{current:i.current,value:e.sons}}):i._e()],1)}),0)}var Ze=Xe.exports,ti={name:"excel",props:["readonly","value"],data:function(){return{instance:null}},mounted:function(){var t=window.x;if(t&&t.spreadsheet)return this.init();var e=this;$.lib(["xspreadsheet/xspreadsheet.js","xspreadsheet/xspreadsheet.css"],function(){window.x.spreadsheet.locale("zh-cn"),e.init()}),window.addEventListener("keydown",this.keydown)},render:function(t){return t("div")},destroyed:function(){window.removeEventListener("keydown",this.keydown)},methods:{keydown:function(t){83===t.keyCode&&(navigator.platform.match("Mac")?t.metaKey:t.ctrlKey)&&(t.stopPropagation(),t.preventDefault(),this.instance&&this.save(this.instance.getData()))},init:function(){var e=this,t=this.value,i=window.x;if(this.instance)return t&&this.instance.loadData(JSON.parse(t));this.instance=i.spreadsheet(this.$el,{view:{height:function(){return document.documentElement.clientHeight-36}}}).change(function(t){e.save(t)}),$("textarea",this.$el).on("keydown",this.keydown),t&&this.instance.loadData(JSON.parse(t))},save:function(t){$.emit("docContentUpdate",JSON.stringify(t))}}};Ye._withStripped=!0;var ei={props:["value","current"],name:"Nav",methods:{selected:function(t){if(!t.link)return alert(t.title+"\u6587\u6863\u5c1a\u672a\u521b\u5efa");if("folder"!==t.link){var e={event:"doc",data:t.link};$.emit("chapterEvt",e)}}}},ii=Object(r.a)(ei,Ye,[],!1,null,null,null);ii.options.__file="doc/repository/nav.vue";var ni=ii.exports,si={1:"Editor",2:"Mind",5:"Graph",6:"Grid"},ai={2:"\u9009\u4e2d\u8282\u70b9\uff0c\u6309enter\u952e\u6dfb\u52a0\u5b50\u8282\u70b9\uff0ctab\u952e\u6dfb\u52a0\u540c\u7ea7\u8282\u70b9",5:"\u6309Ctr+S\uff0c\u4fdd\u5b58\u6587\u6863"},oi={name:"docBoard",props:["itemId","nodes"],components:{Editor:He,Mind:Ge.a,Nav:ni,Graph:Ze,ChangeTitle:Ue,Grid:ti},data:function(){return{isShow:!1,showNav:!1,readonly:!1,timerId:1,value:null,tooltip:"",debounce:null}},computed:{name:function(){return this.value?si[this.value.type]:"Editor"}},watch:{itemId:function(t){this.init(t)}},created:function(){this.debounce=$.debounce(this.save,15e3),this.init(this.itemId),$.on("docContentUpdate",this.debounce)},destoryed:function(){this.debounce.cancel(),$.off("docContentUpdate")},methods:{unload:function(t){this.debounce.flush();return(t=t||window.event).returnValue="\u786e\u5b9a\u9000\u51fa\u5417?"},changeTitle:function(t){this.value.title=t.data.title},init:function(n){if(!n)return this.isShow=!1;$.get({_id:n},"/note/get.do",function(t){var e=t.data;this.tooltip=ai[e.type],(this.value=e)&&e.content||(this.readonly=!1),this.isShow=!0,window.addEventListener("beforeunload",this.unload);var i=window.location.href;-1<i.indexOf("docId")?(i=$.setParam("docId",n,i),window.history.replaceState(null,e.title,i)):(i=$.setParam("docId",n,i),window.history.pushState(null,e.title,i))},this)},edit:function(){this.readonly=!this.readonly},nav:function(){this.showNav=!this.showNav},save:function(t){var e={_id:this.itemId,content:t};$.post(e,"/note/patch.do",function(){return $.notice("\u4fdd\u5b58\u5b8c\u6210","success"),!1},this)},close:function(){this.debounce.flush(),window.removeEventListener("beforeunload",this.unload),this.$parent.docId="";var t=$.setParam("docId","");window.history.replaceState(null,null,t)}}},ri=Object(r.a)(oi,Me,[],!1,null,null,null);ri.options.__file="doc/repository/board.vue";function li(){var i=this,t=i.$createElement,n=i._self._c||t;return n("z-button",{attrs:{plain:"",size:"small"},on:{click:i.show}},[i._t("default"),i._v(" "),i.isShow?n("z-dialog",{staticClass:"k-repository-set",attrs:{size:"small",title:"\u77e5\u8bc6\u5e93\u6743\u9650\u8bbe\u7f6e",visible:""},on:{close:i.close}},[n("z-form",[n("z-radio",{attrs:{label:"\u9605\u8bfb\u6743\u9650"},on:{change:i.change},model:{value:i.def,callback:function(t){i.def=t},expression:"def"}},[n("var",{attrs:{value:"1"}},[i._v("\u79c1\u6709\u6587\u5e93")]),i._v(" "),n("var",{attrs:{value:"3"}},[i._v("\u540c\u4e8b\u5f00\u653e")]),i._v(" "),n("var",{attrs:{value:"2"}},[i._v("\u5b8c\u5168\u5f00\u653e")])]),i._v(" "),n("z-field",{attrs:{label:"\u7528\u6237\u5217\u8868"}},[n("z-employee",{attrs:{max:1,popover:""},on:{finish:i.addUser}},[n("z-button",{attrs:{plain:""}},[i._v("\u6dfb\u52a0\u7528\u6237")])],1),i._v(" "),i._l(i.users,function(e){return n("div",{key:e,staticClass:"user"},[n("z-nick",{attrs:{uid:e}}),i._v(" "),n("i",{staticClass:"ft icon hover",on:{click:function(t){return i.remove(e)}}},[i._v("\ue6c2")])],1)})],2)],1)],1):i._e()],2)}var ci=ri.exports;li._withStripped=!0;var di={props:["note","permision"],data:function(){return{def:"1",users:[],current:{},searchTag:!1,isShow:!1}},created:function(){this.def=this.$parent.data.permision},methods:{change:function(t){var e={_id:this.note,permision:t};$.post(e,"/note/patch.do",function(t){this.$parent.data.permision=e.permision},this)},show:function(){this.isShow=!0,this.loadData()},addUser:function(t){var e={noteId:this.note,permision:2,uid:t};e.uid&&$.post(e,"/note/addUser.do",function(t){this.users.unshift(e.uid)},this)},remove:function(i){var n=this;$.get({uid:i,noteId:this.note},"/note/removeUser.do",function(t){n.users.forEach(function(t,e){t===i&&n.users.splice(e,1)})})},close:function(){this.isShow=!1},loadData:function(){$.get({noteId:this.note},"/select/noteUser.json",function(t){var e=this,i=t.data;i&&i.forEach(function(t){e.users.push(t.uid)})},this)}}},ui=Object(r.a)(di,li,[],!1,null,null,null);ui.options.__file="doc/repository/set.vue";var hi={props:["data","summary","pid"],components:{Chapter:Ve,AddDoc:Pe,Board:ci,Set:ui.exports},data:function(){return{showSet:!1,readonly:!1,docId:null}},provide:function(){return{repository:this}},mounted:function(){$.on("chapterEvt",this.subscribe);var t=$.getParam("docId");t&&(this.docId=t)},destory:function(){$.off("chapterEvt")},methods:{remove:function(t,e,i){for(var n,s,a=0;a<e.length;a++){if((n=e[a]).id===t)return!i&&0<n.sons.length?(alert("\u5220\u9664\u5931\u8d25\uff0c\u8bf7\u5148\u5220\u9664\u5b50\u6587\u6863\u3002"),null):(s=e.splice(a,1))[0];if(n.sons&&0<n.sons.length&&(s=this.remove(t,n.sons,i)))return s}return null},add:function(t,e,i,n){for(var s,a=0;a<e.length;a++){if((s=e[a]).id===t)return n?s.sons.unshift(i):e.splice(a,0,i),!0;if(s.sons&&0<s.sons.length&&this.add(t,s.sons,i,n))return!0}return!1},edit:function(t,e){for(var i,n=0;n<e.length;n++){if((i=e[n]).id===t.data){if("folder"===t.event)return i.status=!i.status,!1;if("edit"===t.event&&(i.link=t.link,"folder"===t.link&&(i.status=!0),i.title=t.title,i.uid=t.uid,t.type&&(i.type=t.type)),"title"===t.event){if(i.title===t.title)return!1;i.title=t.title}return!0}if(i.sons&&0<i.sons.length&&this.edit(t,i.sons))return!0}return!1},move:function(t){var e=this.remove(t.from,this.summary.sons,!0),i=$.extend({},e,!1);return this.add(t.to,this.summary.sons,i,t.isSon)},subscribe:function(t){var e,i=this.summary;if("move"===t.event)return e=this.move(t),this.save(e);if("add"!==t.event)return"remove"===t.event?(e=this.remove(t.data.id,i.sons),this.save(e)):"save"===t.event?this.save(!0):"doc"===t.event?this.docId=t.data:(e=this.edit(t,i.sons),void this.save(e));var n={title:"\u65b0\u589e\u6587\u6863",link:"",date:"",sons:[]};return i.id++,n.id=i.id,t.data.sons.push(n),this.save(!0)},cancel:function(){this.readonly=!0},changeTitle:function(t){this.data.title=t.data.title},save:function(){var t={_id:this.data._id,content:JSON.stringify(this.summary)};$.post(t,"/note/patch.do",function(t){},this)}}},vi=Object(r.a)(hi,$e,[],!1,null,null,null);vi.options.__file="doc/repository/index.vue";function pi(){var e=this,t=e.$createElement,i=e._self._c||t;return i("z-popover",{staticClass:"search",attrs:{width:"260"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[i("z-input",{attrs:{placeholder:"\u8bf7\u8f93\u5165\u5173\u952e\u5b57\u641c\u7d22"},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}}),e._v(" "),i("div",{staticStyle:{"text-align":"right","margin-top":"10px"}},[i("z-button",{attrs:{size:"mini"},on:{click:e.toggle}},[e._v("\u53d6\u6d88")]),e._v(" "),i("z-button",{attrs:{size:"mini",type:"primary"},on:{click:e.search}},[e._v("\u786e\u5b9a")])],1),e._v(" "),i("i",{staticClass:"ft icon hover",attrs:{slot:"reference"},slot:"reference"},[e._v("\ue7ae")])],1)}var fi=vi.exports,mi=function(){return{id:3,sons:[]}};pi._withStripped=!0;var _i={data:function(){return{keyword:"",visible:!1}},methods:{toggle:function(){this.visible=!this.visible},search:function(){this.toggle(),$.emit("J_docList","title",this.keyword)}}},gi=Object(r.a)(_i,pi,[],!1,null,null,null);gi.options.__file="doc/search.vue";var wi={data:function(){return{content:null,current:null}},components:{Editor:fi,Search:gi.exports},created:function(){$.on("docSave",this.save)},destory:function(){$.off("docSave")},methods:{select:function(t){if(!this.current||this.current._id!==t._id){this.current=t,this.loadContent(t._id,mi());var e=$.setParam("rid",t._id);window.history.replaceState(null,null,e)}},callback:function(t){if(0!==t.total){var e=t.list;if(0===e.length)return this.content=null,this.current=null;this.current&&this.current._id===e[0]._id||this.select(e[0])}},save:function(t,e,i){if(!t)return!1;void 0===i&&(i=3);var n={_id:this.current._id,content:JSON.stringify(e)};$.post(n,"/note/patch.do",function(t){$.notice("\u4fdd\u5b58\u6210\u529f\uff01","success")},this,i)},loadContent:function(t,i){t&&$.post({_id:t},"/get/noteContent.json",function(t){var e=t.data;e.content?this.content=JSON.parse(e.content):this.content=i},this)}}},bi=Object(r.a)(wi,xe,[],!1,null,null,null);bi.options.__file="doc/index.vue";function yi(){var t=this,e=t.$createElement;return(t._self._c||e)("z-execute",{attrs:{type:"link",action:"/thing/restore.do?_id="+t.value,callback:t.callback}},[t._v("\u53d6\u6d88\u5f52\u6863\n")])}var ki=bi.exports;yi._withStripped=!0;var Ci={props:["value"],methods:{callback:function(t){$.emit("thingUpdate",t.data,"add")}}},xi=Object(r.a)(Ci,yi,[],!1,null,null,null);xi.options.__file="common/thingRestore.vue";var $i=xi.exports;function zi(){var e=this,t=e.$createElement,i=e._self._c||t;return 0<e.width?i("z-scrollbar",{attrs:{viewHeight:-100,viewWidth:e.width}},[i("z-draggable",{staticClass:"k-board-column",attrs:{list:e.columns},on:{end:e.save}},e._l(e.columns,function(t){return i("Column",{key:t.tag,attrs:{columns:e.columns,now:e.now,data:t}})}),1)],1):e._e()}function Si(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"column",attrs:{"data-id":e.data.tag}},[i("Title",{attrs:{data:e.data,columns:e.columns}}),e._v(" "),i("z-scrollbar",{attrs:{height:-150,"data-id":e.data.tag}},[i("z-draggable",{attrs:{list:e.data.sons,group:"things"},on:{add:e.begin,end:e.end}},e._l(e.data.sons,function(t){return i("Thing",{key:t._id,attrs:{now:e.now,item:t}})}),1),e._v(" "),i("AddThing",{attrs:{data:e.data},on:{changeCategory:e.addTing}})],1)],1)}function ji(){var i=this,t=i.$createElement,n=i._self._c||t;return n("div",{staticClass:"k-board-add"},[n("div",{directives:[{name:"show",rawName:"v-show",value:!i.isAdd,expression:"!isAdd"}],staticClass:"action",on:{click:i.show}},[n("i",{staticClass:"ft icon"},[i._v("\ue857")]),i._v("\u6dfb\u52a0\u5f85\u529e\n    ")]),i._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:i.isAdd,expression:"isAdd"}],staticClass:"wrap"},[n("z-input",{attrs:{type:"textarea",autosize:"",placeholder:"\u8bf7\u8f93\u5165\u8981\u5904\u7406\u7684\u4e8b\u9879"},nativeOn:{keyup:function(t){return i.keyup(t)}},model:{value:i.title,callback:function(t){i.title=t},expression:"title"}}),i._v(" "),n("div",{staticClass:"prority"},[i._l(i.prorityData,function(e){return n("label",{class:"k-prority-add "+e.key,attrs:{title:e.title},on:{click:function(t){return i.select(e,t)}}})}),i._v(" "),n("div",{staticClass:"btns"},[n("z-button",{attrs:{size:"mini",type:"primary"},on:{click:i.save}},[i._v("\u6dfb\u52a0\u4efb\u52a1")]),i._v(" "),n("i",{staticClass:"ft icon",on:{click:i.close}},[i._v("\ue710")])],1)],2)],1)])}ji._withStripped=Si._withStripped=zi._withStripped=!0;var Ti=[{key:"a",title:"\u91cd\u8981\u4e14\u7d27\u6025"},{key:"b",title:"\u91cd\u8981\u4e0d\u7d27\u6025"},{key:"c",title:"\u7d27\u6025\u4e0d\u91cd\u8981"},{key:"d",title:"\u4e0d\u91cd\u8981\u4e0d\u7d27\u6025"}],Ii={props:["data"],data:function(){return{title:"",uid:"",prority:"b",isAdd:!1,prorityData:Ti}},mounted:function(){this.uid=zen.user.id},methods:{show:function(){var e=this;this.isAdd=!0,this.$nextTick(function(t){$("textarea",e.$el).el[0].focus()})},close:function(){this.isAdd=!1},select:function(t,e){t.key!==this.prority&&(this.prority=t.key,$(".k-prority-add",this.$el).removeClass("active"),$(e.currentTarget).addClass("active"))},keyup:function(t){var e=this,i=t.keyCode;if(13===i&&(t.stopPropagation(),t.preventDefault(),this.save(),this.$nextTick(function(t){e.title=""})),27===i)return t.preventDefault(),this.close()},save:function(){if(!this.title)return alert("\u4efb\u52a1\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a");var i={title:this.title,tag:this.data.tag,projectId:$.getParam("id"),quadrant:"b",status:0};this.prority&&(i.quadrant=this.prority),$.post(i,"/thing/put.do",function(t){var e=t.data;i._id=e._id,this.title="",this.$emit("changeCategory",i)},this)}}},Ei=Object(r.a)(Ii,ji,[],!1,null,null,null);Ei.options.__file="board/addThing.vue";function Oi(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"thing",class:e.item.quadrant,attrs:{now:e.now,drag:"board"},on:{dblclick:e.dblclick,click:function(t){return e.detail(e.item)}}},[i("div",{staticClass:"title",class:{finished:1===e.item.status}},[e._v("\n        "+e._s(e.item.title)+"\n    ")]),e._v(" "),i("div",{staticClass:"more"},[i("span",{staticClass:"status",class:e.status}),e._v(" "),i("z-avatar",{attrs:{size:"small",uid:e.item.owner}})],1)])}var qi=Ei.exports;Oi._withStripped=!0;var Di={props:["item","now"],computed:{status:function(){var t=this.item;return 1===t.status?"doned":t.end&&t.end<this.now?"overtime":""}},methods:{detail:function(t){$.emit("thingDetail",t._id)},dblclick:function(t){t.preventDefault(),t.stopPropagation()}}},Ni=Object(r.a)(Di,Oi,[],!1,null,null,null);Ni.options.__file="board/thing.vue";function Pi(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"header"},[i("div",{staticClass:"h4"},[e._v("\n        "+e._s(e.title)+"\n        "),i("z-popover",{attrs:{placement:"bottom-end","popper-class":"z-project-pop",width:"50",trigger:"click"}},[i("span",{staticClass:"ft hover",on:{click:function(t){e.visible=!0}}},[e._v("\u91cd\u547d\u540d")]),e._v(" "),i("z-confirm",{staticClass:"ft hover",attrs:{tip:"\u786e\u5b9a\u5220\u9664\u9762\u677f\u5417"},on:{click:e.remove}},[e._v("\u5220\u9664")]),e._v(" "),i("i",{staticClass:"ft icon",attrs:{slot:"reference"},slot:"reference"},[e._v("\ue737")])],1),e._v(" "),e.visible?i("z-dialog",{attrs:{width:"30%",title:"\u4fee\u6539\u540d\u79f0"}},[i("z-input",{attrs:{type:"text"},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}}),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("z-button",{on:{click:function(t){e.visible=!1}}},[e._v("\u53d6 \u6d88")]),e._v(" "),i("z-button",{attrs:{type:"primary"},on:{click:e.updateTitle}},[e._v("\u786e \u5b9a")])],1)],1):e._e()],1)])}var Li=Ni.exports;Pi._withStripped=!0;var Ai={props:["data","columns"],data:function(){return{visible:!1,title:""}},mounted:function(){this.title=this.data.title},methods:{remove:function(){if(0!==this.data.sons.length)return $.notice("\u8fd8\u6709\u5f85\u5b8c\u6210\u7684\u4efb\u52a1\uff0c\u4e0d\u80fd\u5220\u9664","error");for(var t=0;t<this.columns.length;t++)this.columns[t].tag===this.data.tag&&this.columns.splice(t,1);var e={_id:$.getParam("id"),board:JSON.stringify(this.columns)};$.post(e,"/patch/project.json",function(){$.refresh()},this)},updateTitle:function(t){for(var e=0;e<this.columns.length;e++)if(this.columns[e].tag===this.data.tag){this.columns[e].title=this.title;break}var i={_id:$.getParam("id"),board:JSON.stringify(this.columns)};$.post(i,"/patch/project.json",function(){},this),this.visible=!1}}},Ui=Object(r.a)(Ai,Pi,[],!1,null,null,null);Ui.options.__file="board/title.vue";var Ji={props:["data","now","columns"],components:{Thing:Li,AddThing:qi,Title:Ui.exports},methods:{begin:function(t){t.pullMode&&this.drag(t)},end:function(t){t.pullMode||t.newIndex===t.oldIndex||this.drag(t)},drag:function(t){var e=t.newIndex,i=this.data,n=i.sons[e],s={_id:n._id,tag:n.tag};if(0===e)if(1===i.sons.length)s.order=1e5;else{var a=this.data.sons[e+1];s.order=a.order-500}else if(e===i.sons.length){var o=i.sons[e-1];s.order=o.order+500}else{var r=i.sons[e+1],l=i.sons[e-1];s.order=parseInt((r.order+l.order)/2)}$.post(s,"/thing/patch.do",function(t){},this)},sort:function(t,e){p(t,e,this.data.sons)},addTing:function(t){this.data.sons.unshift(t)},remove:function(){for(var t,e=this.$parent.columns,i=0;i<e.length;i++)if((t=e[i]).tag===this.data.tag){t=e.splice(i,1)[0];break}this.$parent.save(),0<t.sons.length&&0<e.length&&$.refresh()}}},Wi=Object(r.a)(Ji,Si,[],!1,null,null,null);Wi.options.__file="board/column.vue";var Mi=Wi.exports,Qi=[{title:"\u4ea7\u54c1\u89c4\u5212",tag:"t1",sons:[]},{title:"\u524d\u7aef\u5f00\u53d1",tag:"t2",sons:[]},{title:"\u540e\u7aef\u5f00\u53d1",tag:"t3",sons:[]},{title:"\u6d4b\u8bd5",tag:"t4",sons:[]},{title:"\u53d1\u5e03",tag:"t5",sons:[]},{title:"\u5176\u5b83",tag:"t6",sons:[]}],Vi="\u672a\u5f52\u7c7b",Fi={props:["value"],data:function(){return{projectId:"",now:0,data:{},width:0,columns:[]}},watch:{value:function(){this.init()}},components:{Column:Mi},created:function(){var t=new Date;this.now=parseInt(t.getTime()/1e3),this.init(),$.on("thingUpdate",this.thingChange)},destroyed:function(){$.off("thingUpdate")},methods:{thingChange:function(t,e){var i=this.getColumn(t.tag);if(i){var n=i.sons;if("add"===e)return n.unshift(t);for(var s=0;s<n.length;s++)if(n[s]._id===t._id)return void("remove"===e?n.splice(s,1):n[s][e]=t[e])}},init:function(){var i=this;this.columns=[],this.projectId=$.getParam("id");var t=this.value;t.board?(this.rndId=this.projectId,this.columns=JSON.parse(t.board)):(this.rndId=zen.id(),this.columns=Qi),this.columns.forEach(function(t){t.sons||(t.sons=[])}),this.resize();var e=t.things;e&&0!==e.length&&(e.forEach(function(t){var e=i.getColumn(t.tag);1===t.status?e.sons.push(t):e.sons.unshift(t)}),this.columns[0].tag===Vi&&0===this.columns[0].length&&this.columns.splice(0,1))},resize:function(){this.width=320*this.columns.length},getColumn:function(t){for(var e,i=0;i<this.columns.length;i++)if((e=this.columns[i]).tag===t)return e;if(this.columns[0].tag===Vi)return this.columns[0];var n={tag:Vi,title:Vi,sons:[]};return this.columns.unshift(n),this.columns[0]},save:function(t){if(!t.pullMode&&t.newIndex!==t.oldIndex){var e={id:this.rndId,content:[]};this.columns.forEach(function(t){e.content.push({title:t.title,tag:t.tag,sons:[]})});var i={_id:this.projectId,board:JSON.stringify(e)};$.post(i,"/patch/project.json",function(){this.resize()},this)}}}},Ri=Object(r.a)(Fi,zi,[],!1,null,null,null);Ri.options.__file="board/index.vue";function Bi(){var t=this.$createElement;return(this._self._c||t)(this.name,{tag:"component",attrs:{value:this.value}})}function Hi(){var i=this,t=i.$createElement,n=i._self._c||t;return n("div",{staticClass:"wrap k-my-setting"},[i._l(i.imgs,function(e){return n("div",{staticClass:"skin",class:{active:e===i.def},on:{click:function(t){return i.select(e)}}},[n("img",{attrs:{src:i.domain+"/bg/"+e+".jpg"}})])}),i._v(" "),n("input",{attrs:{type:"hidden",name:"skin"},domProps:{value:i.def}})],2)}var Gi=Ri.exports;Hi._withStripped=Bi._withStripped=!0;var Ki={props:["value","data"],data:function(){return{imgs:[1,2,3,4,5,6,7,8,9,10],def:3,domain:""}},mounted:function(){zen.mode<3&&(this.domain="//a.yimiyisu.com/kooteam"),this.value&&(this.def=this.value)},methods:{select:function(t){this.def=t;var e=this.domain+"/bg/"+t+".jpg";$("body").css("background-image","url('"+e+"')")}}},Xi=Object(r.a)(Ki,Hi,[],!1,null,null,null);Xi.options.__file="system/components/skin.vue";function Yi(){var t=this.$createElement;return(this._self._c||t)("z-submit",{attrs:{action:"/patch/user.json"},on:{finish:this.finish}},[this._v("\u4fdd\u5b58")])}var Zi=Xi.exports;Yi._withStripped=!0;var tn={props:["value"],methods:{finish:function(t){var e=t.data;zen.user.calendar=e.calendar,zen.user.home=e.home,window.localStorage.config=""}}},en=Object(r.a)(tn,Yi,[],!1,null,null,null);en.options.__file="system/components/set.vue";function nn(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"content"},e._l(e.value,function(t){return i("Thing",{key:t._id,attrs:{now:e.now,data:t}})}),1)}var sn=en.exports;nn._withStripped=!0;var an={props:["value"],components:{Thing:v},data:function(){return{list:[],now:0}},created:function(){var t=new Date;this.now=t.getTime()%1e3}},on=Object(r.a)(an,nn,[],!1,null,null,null);on.options.__file="system/components/thingList.vue";function rn(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{"text-align":"center"}},[i("img",{staticStyle:{width:"260px"},attrs:{src:t.qr}}),t._v(" "),i("br"),t._v("\n    \u4e8c\u7ef4\u7801"+t._s(t.date)+"\u524d\u5185\u6709\u6548\n")])}var ln=on.exports;rn._withStripped=!0;var cn={data:function(){return{qr:""}},computed:{date:function(){var t=new Date;return t=parseInt(t.getTime()/1e3)+900,$.date(t)}},mounted:function(){var t=$.getUser();$.get({id:"join"+t.siteId},"/home/kooteamJoin.do",function(t){this.qr=t.data},this)}},dn=Object(r.a)(cn,rn,[],!1,null,null,null);dn.options.__file="system/components/invite.vue";var un={props:["name","value"],components:{skin:Zi,set:sn,thingList:ln,invite:dn.exports,user:{render:function(t){var e=t,i=$.getUser();return 1<zen.mode?e("z-popup",{attrs:{type:"text",size:"big",view:"/my/info.xhtm"}},["\u6b22\u8fce\uff0c",i.nick,"!"]):e("div",{class:"user-info"},["\u6b22\u8fce\uff0c",i.nick,"!",e("ul",[e("li",[e("z-popup",{attrs:{type:"text",size:"big",view:"/my/info.xhtm"}},["\u4e2a\u4eba\u4e2d\u5fc3"])]),e("li",[e("z-wicket",{attrs:{type:"text","wicket-size":"small",view:"/my/space.jsx"}},["\u5207\u6362\u7a7a\u95f4"])]),e("li",[e("z-link",{attrs:{type:"text",href:"https://www.kooteam.com/view.html?id=5e5893abc687557cc87e38c0",target:"_blank"}},["\u5e2e\u52a9\u4e2d\u5fc3"])]),e("li",[e("z-link",{attrs:{type:"text",href:"https://www.kooteam.com/view.html?id=5e5893b9c687557cc87e38c3",target:"_blank"}},["\u79c1\u6709\u90e8\u7f72"])])])])}}}},hn=Object(r.a)(un,Bi,[],!1,null,null,null);hn.options.__file="system/index.vue";function vn(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"bl inline-block",on:{click:e.show}},[e._t("default"),e._v(" "),e.visible?i("z-dialog",{attrs:{width:"450px",title:e.title,visible:""},on:{close:e.close}},[e.showQr?i("QR",{model:{value:e.params,callback:function(t){e.params=t},expression:"params"}}):e._e(),e._v(" "),e.showQr?e._e():i("Password",{attrs:{target:e.target},model:{value:e.params,callback:function(t){e.params=t},expression:"params"}}),e._v(" "),e.isQr?i("div",{staticClass:"ft hover blue",staticStyle:{"text-align":"right"},on:{click:e.change}},[e._v("\n            "+e._s(e.tip)+"\n        ")]):e._e()],1):e._e()],2)}function pn(){var e=this,t=e.$createElement,i=e._self._c||t;return i("z-form",{staticStyle:{width:"380px"},attrs:{"label-width":"90px"}},[i("z-input",{attrs:{label:"\u7528\u6237\u540d"},model:{value:e.user,callback:function(t){e.user=t},expression:"user"}}),e._v(" "),i("z-input",{attrs:{label:"\u767b\u5f55\u5bc6\u7801","show-password":""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submit(t)}},model:{value:e.pwd,callback:function(t){e.pwd=t},expression:"pwd"}}),e._v(" "),i("z-field",[i("z-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("\u63d0\u4ea4")])],1)],1)}var fn=hn.exports;pn._withStripped=vn._withStripped=!0;var mn={props:["value","target"],data:function(){return{user:"",pwd:""}},methods:{keyup:function(t){},submit:function(){var t="/zeto/login.do";this.value&&"ladp"===this.value.type&&(t="/home/ladp.do"),$.post({username:this.user,password:this.pwd,redirect:"/todo/home.xhtm"},t)}}},_n=Object(r.a)(mn,pn,[],!1,null,null,null);_n.options.__file="login/password.vue";function gn(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"qr",attrs:{id:"J_qr"}})}var wn=_n.exports;gn._withStripped=!0;var bn={props:["value"],mounted:function(){var e=this,i=this.value,n=window.location.origin;if("wechat"===i.type)return $.js(["http://rescdn.qqmail.com/node/ww/wwopenmng/js/sso/wwLogin-1.0.0.js"],function(){window.WwLogin({id:"J_qr",appid:i.appid,agentid:i.agentid,redirect_uri:n+i.redirect_uri,state:i.checkId})});if("cloud"===i.type){var t=new Date;return t=$.date(parseInt(t.getTime()/1e3)+900),this.$el.innerHTML='<img src="'.concat(i.qr,'"/><br />\u4e8c\u7ef4\u7801').concat(t,"\u524d\u6709\u6548")}$.lib(["qrcode.min.js"],function(){var t=n+i.url;new QRCode(e.$el,{width:150,height:150}).makeCode(t)})}},yn=Object(r.a)(bn,gn,[],!1,null,null,null);yn.options.__file="login/qr.vue";var kn={components:{Password:wn,QR:yn.exports},data:function(){return{isQr:!1,showQr:!1,visible:!1,params:null,target:"/todo/home.xhtm",timerId:null}},computed:{tip:function(){return this.showQr?"\u8d26\u53f7\u5bc6\u7801\u767b\u9646":"\u624b\u673a\u626b\u7801\u767b\u9646"},title:function(){var t=this.params;return t&&this.isQr?"dingding"===t.type?"\u8bf7\u7528\u9489\u9489\u626b\u7801\u767b\u5f55":"wechat"===t.type?"\u8bf7\u7528\u4f01\u4e1a\u5fae\u4fe1\u626b\u7801\u767b\u5f55":"cloud"===t.type?"\u5fae\u4fe1\u626b\u7801/\u5173\u6ce8\u540e\u767b\u5f55":"\u7528\u6237\u767b\u5f55":"\u7528\u6237\u767b\u5f55"}},mounted:function(){$.get(null,"/home/loginCheck.do",function(t){var e=t.data;(this.params=e)&&e.type&&"ladp"!==e.type&&(this.isQr=!0,this.showQr=!0,"dingding"!==e.type&&"cloud"!==e.type||(this.timerId=setInterval(this.checkId,2e3)))},this)},destory:function(){clearInterval(this.timerId)},methods:{show:function(){this.visible=!0},close:function(){this.visible=!1},change:function(){this.showQr=!this.showQr},checkId:function(){var t=this.params.checkId;t&&$.get({checkId:t},"/home/loginCheck.do",function(){})}}},Cn=Object(r.a)(kn,vn,[],!1,null,null,null);Cn.options.__file="login/index.vue";function xn(){var t=this,e=t.$createElement,i=t._self._c||e;return t.isShow?i("z-dialog",{attrs:{"custom-class":"k-report",width:"80%",top:"20px"},on:{close:t.close}},["new"===t.type||"edit"===t.type?i("Writer",{attrs:{data:t.report}}):t._e(),t._v(" "),"view"===t.type?i("Preview",{attrs:{data:t.report}}):t._e()],1):t._e()}function $n(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"input-title",staticStyle:{margin:"0 14px"}},[t._v(t._s(t.report.title))]),t._v(" "),i("div",{staticClass:"article-body",domProps:{innerHTML:t._s(t.report.content)}})])}var zn=Cn.exports;$n._withStripped=xn._withStripped=!0;var Sn={props:["data"],watch:{data:function(t){this.report=t}},data:function(){return{report:{}}},mounted:function(){this.report=this.data}},jn=Object(r.a)(Sn,$n,[],!1,null,null,null);jn.options.__file="report/view.vue";function Tn(){var e=this,t=e.$createElement,i=e._self._c||t;return i("z-form",{staticStyle:{width:"100%"},attrs:{"label-width":"90px"}},[i("div",{staticClass:"z-row header"},[i("div",{staticClass:"z-20"},[i("input",{staticClass:"input-title",attrs:{type:"text",name:"title"},domProps:{value:e.report.title}}),e._v(" "),i("input",{attrs:{type:"hidden",name:"_id"},domProps:{value:e.report._id}})]),e._v(" "),i("div",{staticClass:"z-4"},[i("z-radio",{attrs:{name:"type",type:"button",size:"mini"},model:{value:e.mode,callback:function(t){e.mode=t},expression:"mode"}},[i("var",{attrs:{value:"2"}},[e._v("\u65e5\u62a5")]),e._v(" "),i("var",{attrs:{value:"1"}},[e._v("\u5468\u62a5")])])],1)]),e._v(" "),i("z-editor",{attrs:{value:e.report.content,height:"500",name:"content"}}),e._v(" "),i("z-employee",{staticStyle:{"margin-top":"18px"},attrs:{label:"\u6284\u9001\u4eba",value:e.readers,name:"readers"}}),e._v(" "),i("z-input-tag",{attrs:{label:"\u6284\u9001\u90ae\u7bb1",name:"mails",value:e.report.mails,placeholder:"\u6284\u9001\u90ae\u7bb1"}}),e._v(" "),i("z-field",[i("z-submit",{attrs:{action:"/report/save.do"},on:{finish:e.save}},[e._v("\u4fdd\u5b58")]),e._v(" "),i("z-submit",{attrs:{type:"text",action:"/report/saveWithSend.do"},on:{finish:e.save}},[e._v("\u7acb\u5373\u53d1\u9001\n        ")])],1)],1)}var In=jn.exports;Tn._withStripped=!0;var En={props:["data"],data:function(){return{report:{},mode:"2",editor:null}},computed:{readers:function(){var t=this.report;return t&&t.readers?JSON.parse(t.readers):[]}},watch:{data:function(t){if(t&&(this.report=t),this.mode===t.type)return this.template(this.mode);this.mode=t.type},mode:function(t){this.template(t)}},created:function(){this.report=this.data||{},this.template(this.mode)},methods:{template:function(t){this.report._id||$.post({mode:t},"/report/template.do",function(t){var e=t.data,i=this.report;i.title=e.title,i.readers=e.readers,i.mails=e.mails,e.content&&(i.content=e.content)},this)},save:function(t){t.data&&(this.report._id=t.data._id)}}},On=Object(r.a)(En,Tn,[],!1,null,null,null);On.options.__file="report/writer.vue";var qn={components:{Writer:On.exports,Preview:In},data:function(){return{type:"",report:null,isShow:!1}},mounted:function(){$.on("report",this.init)},methods:{init:function(t,e){"new"===(this.type=t)&&(this.report={_id:"",type:"1",title:"",readers:"",mails:""}),e?$.post({_id:e},"/report/detail.do",function(t){this.report=t.data,this.isShow=!0},this):this.isShow=!0},close:function(){if("set"===this.type)return this.type="new";this.isShow=!1}}},Dn=Object(r.a)(qn,xn,[],!1,null,null,null);Dn.options.__file="report/index.vue";function Nn(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("z-select",{attrs:{label:"\u9879\u76ee\u6a21\u7248",data:e.list,"title-key":"title","value-key":"key"},on:{change:e.change}}),e._v(" "),i("input",{attrs:{type:"hidden",name:"board"},domProps:{value:JSON.stringify(e.process)}}),e._v(" "),0<e.process.length?i("div",{staticClass:"k-project-process"},[i("p",{staticClass:"title"},[e._v("\u5de5\u4f5c\u6d41\u7a0b")]),e._v(" "),i("ul",e._l(e.process,function(t){return i("li",{key:t.tag},[i("span",{staticClass:"item-name"},[e._v(e._s(t.title))])])}),0)]):e._e()],1)}var Pn=Dn.exports;Nn._withStripped=!0;var Ln=[{key:"soft",title:"\u8f6f\u4ef6\u5f00\u53d1",data:[{title:"\u4ea7\u54c1\u89c4\u5212",tag:"t1",sons:[]},{title:"\u524d\u7aef\u5f00\u53d1",tag:"t2",sons:[]},{title:"\u540e\u7aef\u5f00\u53d1",tag:"t3",sons:[]},{title:"\u6d4b\u8bd5",tag:"t4",sons:[]},{title:"\u53d1\u5e03",tag:"t5",sons:[]},{title:"\u5176\u5b83",tag:"t6",sons:[]}]},{key:"mall",title:"\u7535\u5546\u8fd0\u8425",data:[{title:"\u9879\u76ee\u8ba1\u5212",tag:"t1",sons:[]},{title:"\u62cd\u6444\u548c\u4fee\u56fe",tag:"t2",sons:[]},{title:"\u5546\u54c1\u5907\u8d27",tag:"t3",sons:[]},{title:"\u9875\u9762\u8bbe\u8ba1",tag:"t4",sons:[]},{title:"\u540e\u53f0\u8bbe\u7f6e",tag:"t5",sons:[]},{title:"\u9884\u70ed\u548c\u4e0a\u65b0",tag:"t6",sons:[]}]},{key:"product",title:"\u4ea7\u54c1\u5f00\u53d1",data:[{title:"\u4ea7\u54c1\u8ba1\u5212",tag:"t1",sons:[]},{title:"\u6b63\u5728\u8bbe\u8ba1",tag:"t2",sons:[]},{title:"\u6b63\u5728\u7814\u53d1",tag:"t3",sons:[]},{title:"\u6d4b\u8bd5",tag:"t4",sons:[]},{title:"\u51c6\u5907\u53d1\u5e03",tag:"t5",sons:[]},{title:"\u53d1\u5e03\u6210\u529f",tag:"t6",sons:[]}]},{key:"project",title:"\u5de5\u7a0b\u9879\u76ee",data:[{title:"\u9879\u76ee\u8bc4\u4f30",tag:"t1",sons:[]},{title:"\u7acb\u9879",tag:"t2",sons:[]},{title:"\u65b9\u6848\u8bbe\u8ba1",tag:"t3",sons:[]},{title:"\u6807\u4e66\u5236\u4f5c",tag:"t4",sons:[]},{title:"\u6295\u6807\u9636\u6bb5",tag:"t5",sons:[]},{title:"\u6df1\u5316\u8bbe\u8ba1",tag:"t6",sons:[]},{title:"\u5408\u540c\u7b7e\u5b9a\u53ca\u79fb\u4ea4",tag:"t7",sons:[]},{title:"\u65bd\u5de5",tag:"t8",sons:[]},{title:"\u9a8c\u6536",tag:"t9",sons:[]},{title:"\u9879\u76ee\u6536\u5c3e",tag:"t10",sons:[]}]},{key:"person",title:"\u4e2a\u4eba\u5b89\u6392",data:[{title:"\u5f85\u529e",tag:"t1",sons:[]},{title:"\u8d2d\u7269",tag:"t2",sons:[]},{title:"\u8bfb\u4e66",tag:"t3",sons:[]},{title:"\u8fdb\u4fee",tag:"t4",sons:[]},{title:"\u5065\u8eab",tag:"t5",sons:[]},{title:"\u5df2\u5b8c\u6210",tag:"t6",sons:[]}]},{key:"plan",title:"\u9700\u6c42\u7ba1\u7406",data:[{title:"\u9700\u6c42\u6536\u96c6",tag:"t1",sons:[]},{title:"\u8bc4\u4f30\u4e2d",tag:"t2",sons:[]},{title:"\u91c7\u7eb3\u6c60",tag:"t3",sons:[]},{title:"\u8bbe\u8ba1\u4e2d",tag:"t4",sons:[]},{title:"\u5f00\u53d1\u4e2d",tag:"t5",sons:[]},{title:"\u6d4b\u8bd5\u4e2d",tag:"t6",sons:[]},{title:"\u5df2\u4e0a\u7ebf",tag:"t7",sons:[]},{title:"\u672a\u91c7\u7eb3",tag:"t8",sons:[]}]},{key:"hr",title:"\u4eba\u4e8b\u62db\u8058",data:[{title:"\u7b80\u5386\u7b5b\u9009",tag:"t1",sons:[]},{title:"\u7b80\u5386\u4e0d\u901a\u8fc7",tag:"t2",sons:[]},{title:"\u9762\u8bd5\u5b89\u6392",tag:"t3",sons:[]},{title:"\u9762\u8bd5\u901a\u8fc7",tag:"t4",sons:[]},{title:"\u9762\u8bd5\u4e0d\u901a\u8fc7",tag:"t5",sons:[]},{title:"Offer \u53d1\u653e",tag:"t6",sons:[]},{title:"\u5165\u804c",tag:"t7",sons:[]},{title:"\u4eba\u624d\u5e93 - \u672a\u5f55\u7528",tag:"t8",sons:[]}]}],An={data:function(){return{list:Ln,process:[]}},methods:{change:function(e){var i=this;Ln.forEach(function(t){t.key===e&&(i.process=t.data)})}}},Un=Object(r.a)(An,Nn,[],!1,null,null,null);Un.options.__file="project/add.vue";function Jn(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"k-project-process"},[i("ul",e._l(e.process,function(t){return i("li",[i("span",{staticClass:"item-name"},[e._v(e._s(t.title))])])}),0)])}var Wn=Un.exports;Jn._withStripped=!0;var Mn={data:function(){return{process:[]}},props:["content"],created:function(){this.process=JSON.parse(this.content)}},Qn=Object(r.a)(Mn,Jn,[],!1,null,null,null);Qn.options.__file="project/process.vue";var Vn=Qn.exports;zen.loginURL="/home.html",function(){var t=window,i=t.location.pathname;if(!("/"===i||-1<i.indexOf(".html"))){!function(n,s){var t=n.localStorage.config,e=$.cookie("uid");if(t&&e&&(zen.user=JSON.parse(t),e===zen.user.id))return s(zen.user);$.post(null,"/system/my.do",function(t){var e=t.data,i={id:e._id,nick:e.nick,username:e.username,home:e.home,skin:e.skin,mode:e.mode,calendar:e.calendar};zen.user=i,n.localStorage.config=JSON.stringify(i),s(i)})}(t,function(t){!function(n){$(document).ready(function(){var t=n.skin||"3",e="";zen.mode<3&&(e="//a.yimiyisu.com/kooteam");var i="url('"+e+"/bg/"+t+".jpg')";$("body").css("background-image",i)})}(t)});var n=$("#J_navbar"),s="active";$("a",n).el.forEach(function(t){var e=$(t);e.attr("href")===i&&e.parent().addClass("active")}),$("a",n).on("click",function(t){var e=$(t.target);$("."+s,n).removeClass(s),e.parent().addClass(s)})}}(),Vue.component("k-doc",ki),Vue.component("k-thing",v),Vue.component("k-thing-restore",$i),Vue.component("k-board",Gi),Vue.component("k-calendar",je),Vue.component("k-todo",k),Vue.component("k-todo-detail",pe),Vue.component("k-system",fn),Vue.component("k-login",zn),Vue.component("k-report",Pn),Vue.component("k-project-add",Wn),Vue.component("k-process",Vn)}],c.c=b,c.d=function(t,e,i){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},c.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(c.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)c.d(i,n,function(t){return e[t]}.bind(null,n));return i},c.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="",c(c.s=4);